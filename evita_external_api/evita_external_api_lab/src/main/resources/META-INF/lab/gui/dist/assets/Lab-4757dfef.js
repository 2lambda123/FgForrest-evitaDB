import{p as le,h as G,s as Le,i as x,j as Zt,k as he,l as dn,n as pn,q as ro,b as Se,t as Xe,v as lo,x as fn,y as ue,d as Ee,V as Zn,e as d,z as pe,A as ga,m as at,B as Nt,C as Ze,D as oo,E as Ir,F as Vr,G as $r,a as mn,u as io,c as hn,H as Rr,I as Ya,J as Nr,K as so,L as Br,M as uo,N as Mr,O as co,P as Gr,Q as va,R as Ur,T as po,S as te,U as q,W as Ka,f as P,w as y,o as S,X as M,Y as gn,Z as Za,$ as D,a0 as fe,a1 as st,a2 as ya,a3 as ba,_ as se,a4 as ne,a5 as j,a6 as Fr,a7 as Ue,a8 as _a,a9 as ee,aa as Je,ab as et,ac as fo,ad as mo,ae as ho,af as go,ag as vo,ah as yo,ai as bo,aj as _o,ak as So,al as Oo,am as wo,an as To,ao as ko,ap as Po,aq as Eo,ar as Co,as as Ao,at as xo,au as Do,av as Jt,aw as X,ax as V,ay as Lo,az as Sa,aA as Oa,aB as Ot,aC as vn,aD as oa,aE as Io,aF as Wr,aG as Vo,aH as $o,aI as Ro,aJ as No,aK as Bo,aL as Mo,aM as zr,aN as Go,aO as Hr,aP as Uo,aQ as Fo,aR as Wo,aS as qr,aT as zo,aU as Qr,aV as Ho,aW as yn,aX as bn,aY as ie,aZ as we,a_ as ke,a$ as _t,b0 as wa,b1 as qo,b2 as _n,b3 as Ta,b4 as Qo,b5 as Xo,b6 as Fe,b7 as We,b8 as ut,b9 as jo,ba as Yo,bb as Xr,bc as Ko,bd as Zo,be as Jo,bf as ei,bg as ti,bh as Jn,bi as jr,bj as ai,bk as F,bl as Be,bm as ea,bn as ni,bo as tt,bp as Ja,bq as St,br as er,bs as tr,bt as ar,bu as nr,bv as ri,bw as li,bx as Ye,by as je,bz as Sn,bA as oi,bB as ii,bC as rr,bD as en,bE as tn,bF as qt,bG as si,bH as yt,bI as ui,bJ as ci,bK as lr,bL as Yr,bM as Z,bN as di,bO as Kr,bP as Zr,bQ as Oe,bR as pi,bS as fi,bT as Jr,bU as mi,bV as hi,bW as gi,bX as vi,bY as Re,bZ as On,b_ as yi,b$ as bi,c0 as Te,c1 as _i,c2 as Si,c3 as Oi,c4 as bt,c5 as wi,c6 as Ti,c7 as or,c8 as ki,c9 as Pi,ca as Ei,cb as Ci,cc as Ai,cd as an,ce as nn,cf as xi,cg as Di,ch as Li,ci as Ii,cj as ir,ck as Vi,cl as $i,cm as Ri,cn as Ni,co as Bi,cp as Mi,cq as Gi,cr as Ui,cs as Fi,ct as Wi,cu as zi,cv as Hi}from"./index-6c494698.js";import{a as el,u as tl,b as qi}from"./layout-93981915.js";const Qi=le({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Xi(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=e;let n=0;const r=G(null),l=Le(0),o=Le(0),i=Le(0),s=Le(!1),c=Le(!1),u=x(()=>Number(a.scrollThreshold)),p=x(()=>Zt((u.value-l.value)/u.value||0)),m=()=>{const h=r.value;!h||t&&!t.value||(n=l.value,l.value="window"in h?h.pageYOffset:h.scrollTop,c.value=l.value<n,i.value=Math.abs(l.value-u.value))};return he(c,()=>{o.value=o.value||l.value}),he(s,()=>{o.value=0}),dn(()=>{he(()=>a.scrollTarget,h=>{var w;const g=h?document.querySelector(h):window;g&&g!==r.value&&((w=r.value)==null||w.removeEventListener("scroll",m),r.value=g,r.value.addEventListener("scroll",m,{passive:!0}))},{immediate:!0})}),pn(()=>{var h;(h=r.value)==null||h.removeEventListener("scroll",m)}),t&&he(t,m,{immediate:!0}),{scrollThreshold:u,currentScroll:l,currentThreshold:i,isScrollActive:s,scrollRatio:p,isScrollingUp:c,savedScroll:o}}const ji=le({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:a=>["top","bottom"].includes(a)},...ro(),...el(),...Qi(),height:{type:[Number,String],default:64}},"VAppBar"),Yi=Se()({name:"VAppBar",props:ji(),emits:{"update:modelValue":a=>!0},setup(a,e){let{slots:t}=e;const n=G(),r=Xe(a,"modelValue"),l=x(()=>{var _;const f=new Set(((_=a.scrollBehavior)==null?void 0:_.split(" "))??[]);return{hide:f.has("hide"),inverted:f.has("inverted"),collapse:f.has("collapse"),elevate:f.has("elevate"),fadeImage:f.has("fade-image")}}),o=x(()=>{const f=l.value;return f.hide||f.inverted||f.collapse||f.elevate||f.fadeImage||!r.value}),{currentScroll:i,scrollThreshold:s,isScrollingUp:c,scrollRatio:u}=Xi(a,{canScroll:o}),p=x(()=>a.collapse||l.value.collapse&&(l.value.inverted?u.value>0:u.value===0)),m=x(()=>a.flat||l.value.elevate&&(l.value.inverted?i.value>0:i.value===0)),h=x(()=>l.value.fadeImage?l.value.inverted?1-u.value:u.value:void 0),g=x(()=>{var T,k;if(l.value.hide&&l.value.inverted)return 0;const f=((T=n.value)==null?void 0:T.contentHeight)??0,_=((k=n.value)==null?void 0:k.extensionHeight)??0;return f+_});lo(x(()=>!!a.scrollBehavior),()=>{ga(()=>{l.value.hide?l.value.inverted?r.value=i.value>s.value:r.value=c.value||i.value<s.value:r.value=!0})});const{ssrBootStyles:w}=fn(),{layoutItemStyles:b}=tl({id:a.name,order:x(()=>parseInt(a.order,10)),position:ue(a,"location"),layoutSize:g,elementSize:Le(void 0),active:r,absolute:ue(a,"absolute")});return Ee(()=>{const[f]=Zn.filterProps(a);return d(Zn,pe({ref:n,class:["v-app-bar",{"v-app-bar--bottom":a.location==="bottom"},a.class],style:[{...b.value,"--v-toolbar-image-opacity":h.value,height:void 0,...w.value},a.style]},f,{collapse:p.value,flat:m.value}),t)}),{}}}),Ki=le({start:Boolean,end:Boolean,...at(),...Nt()},"VListItemAction"),al=Se()({name:"VListItemAction",props:Ki(),setup(a,e){let{slots:t}=e;return Ee(()=>d(a.tag,{class:["v-list-item-action",{"v-list-item-action--start":a.start,"v-list-item-action--end":a.end},a.class],style:a.style},t)),{}}}),Zi="/lab/logo/evitalab-logo-mini.png?raw=true",Ji="/lab/documentation.svg",es="/lab/discord.svg",ts="/lab/github.svg";function as(a){let{rootEl:e,isSticky:t,layoutItemStyles:n}=a;const r=Le(!1),l=Le(0),o=x(()=>{const c=typeof r.value=="boolean"?"top":r.value;return[t.value?{top:"auto",bottom:"auto",height:void 0}:void 0,r.value?{[c]:Ze(l.value)}:{top:n.value.top}]});dn(()=>{he(t,c=>{c?window.addEventListener("scroll",s,{passive:!0}):window.removeEventListener("scroll",s)},{immediate:!0})}),pn(()=>{window.removeEventListener("scroll",s)});let i=0;function s(){const c=i>window.scrollY?"up":"down",u=e.value.getBoundingClientRect(),p=parseFloat(n.value.top??0),m=window.scrollY-Math.max(0,l.value-p),h=u.height+Math.max(l.value,p)-window.scrollY-window.innerHeight,g=parseFloat(getComputedStyle(e.value).getPropertyValue("--v-body-scroll-y"))||0;u.height<window.innerHeight-p?(r.value="top",l.value=p):c==="up"&&r.value==="bottom"||c==="down"&&r.value==="top"?(l.value=window.scrollY+u.top-g,r.value=!0):c==="down"&&h<=0?(l.value=0,r.value="bottom"):c==="up"&&m<=0&&(g?r.value!=="top"&&(l.value=-m+g+p,r.value="top"):(l.value=u.top+m,r.value="top")),i=window.scrollY}return{isStuck:r,stickyStyles:o}}const ns=100,rs=20;function sr(a){const e=1.41421356237;return(a<0?-1:1)*Math.sqrt(Math.abs(a))*e}function ur(a){if(a.length<2)return 0;if(a.length===2)return a[1].t===a[0].t?0:(a[1].d-a[0].d)/(a[1].t-a[0].t);let e=0;for(let t=a.length-1;t>0;t--){if(a[t].t===a[t-1].t)continue;const n=sr(e),r=(a[t].d-a[t-1].d)/(a[t].t-a[t-1].t);e+=(r-n)*Math.abs(r),t===a.length-1&&(e*=.5)}return sr(e)*1e3}function ls(){const a={};function e(r){Array.from(r.changedTouches).forEach(l=>{(a[l.identifier]??(a[l.identifier]=new oo(rs))).push([r.timeStamp,l])})}function t(r){Array.from(r.changedTouches).forEach(l=>{delete a[l.identifier]})}function n(r){var c;const l=(c=a[r])==null?void 0:c.values().reverse();if(!l)throw new Error(`No samples for touch id ${r}`);const o=l[0],i=[],s=[];for(const u of l){if(o[0]-u[0]>ns)break;i.push({t:u[0],d:u[1].clientX}),s.push({t:u[0],d:u[1].clientY})}return{x:ur(i),y:ur(s),get direction(){const{x:u,y:p}=this,[m,h]=[Math.abs(u),Math.abs(p)];return m>h&&u>=0?"right":m>h&&u<=0?"left":h>m&&p>=0?"down":h>m&&p<=0?"up":os()}}}return{addMovement:e,endTouch:t,getVelocity:n}}function os(){throw new Error}function is(a){let{isActive:e,isTemporary:t,width:n,touchless:r,position:l}=a;dn(()=>{window.addEventListener("touchstart",f,{passive:!0}),window.addEventListener("touchmove",_,{passive:!1}),window.addEventListener("touchend",T,{passive:!0})}),pn(()=>{window.removeEventListener("touchstart",f),window.removeEventListener("touchmove",_),window.removeEventListener("touchend",T)});const o=x(()=>["left","right"].includes(l.value)),{addMovement:i,endTouch:s,getVelocity:c}=ls();let u=!1;const p=Le(!1),m=Le(0),h=Le(0);let g;function w(O,C){return(l.value==="left"?O:l.value==="right"?document.documentElement.clientWidth-O:l.value==="top"?O:l.value==="bottom"?document.documentElement.clientHeight-O:gt())-(C?n.value:0)}function b(O){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const L=l.value==="left"?(O-h.value)/n.value:l.value==="right"?(document.documentElement.clientWidth-O-h.value)/n.value:l.value==="top"?(O-h.value)/n.value:l.value==="bottom"?(document.documentElement.clientHeight-O-h.value)/n.value:gt();return C?Math.max(0,Math.min(1,L)):L}function f(O){if(r.value)return;const C=O.changedTouches[0].clientX,L=O.changedTouches[0].clientY,z=25,U=l.value==="left"?C<z:l.value==="right"?C>document.documentElement.clientWidth-z:l.value==="top"?L<z:l.value==="bottom"?L>document.documentElement.clientHeight-z:gt(),I=e.value&&(l.value==="left"?C<n.value:l.value==="right"?C>document.documentElement.clientWidth-n.value:l.value==="top"?L<n.value:l.value==="bottom"?L>document.documentElement.clientHeight-n.value:gt());(U||I||e.value&&t.value)&&(u=!0,g=[C,L],h.value=w(o.value?C:L,e.value),m.value=b(o.value?C:L),s(O),i(O))}function _(O){const C=O.changedTouches[0].clientX,L=O.changedTouches[0].clientY;if(u){if(!O.cancelable){u=!1;return}const U=Math.abs(C-g[0]),I=Math.abs(L-g[1]);(o.value?U>I&&U>3:I>U&&I>3)?(p.value=!0,u=!1):(o.value?I:U)>3&&(u=!1)}if(!p.value)return;O.preventDefault(),i(O);const z=b(o.value?C:L,!1);m.value=Math.max(0,Math.min(1,z)),z>1?h.value=w(o.value?C:L,!0):z<0&&(h.value=w(o.value?C:L,!1))}function T(O){if(u=!1,!p.value)return;i(O),p.value=!1;const C=c(O.changedTouches[0].identifier),L=Math.abs(C.x),z=Math.abs(C.y);(o.value?L>z&&L>400:z>L&&z>3)?e.value=C.direction===({left:"right",right:"left",top:"down",bottom:"up"}[l.value]||gt()):e.value=m.value>.5}const k=x(()=>p.value?{transform:l.value==="left"?`translateX(calc(-100% + ${m.value*n.value}px))`:l.value==="right"?`translateX(calc(100% - ${m.value*n.value}px))`:l.value==="top"?`translateY(calc(-100% + ${m.value*n.value}px))`:l.value==="bottom"?`translateY(calc(100% - ${m.value*n.value}px))`:gt(),transition:"none"}:void 0);return{isDragging:p,dragProgress:m,dragStyles:k}}function gt(){throw new Error}const ss=["start","end","left","right","top","bottom"],us=le({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:a=>ss.includes(a)},sticky:Boolean,...Ir(),...at(),...Vr(),...el(),...$r(),...Nt({tag:"nav"}),...mn()},"VNavigationDrawer"),nl=Se()({name:"VNavigationDrawer",props:us(),emits:{"update:modelValue":a=>!0,"update:rail":a=>!0},setup(a,e){let{attrs:t,emit:n,slots:r}=e;const{isRtl:l}=io(),{themeClasses:o}=hn(a),{borderClasses:i}=Rr(a),{backgroundColorClasses:s,backgroundColorStyles:c}=Ya(ue(a,"color")),{elevationClasses:u}=Nr(a),{mobile:p}=so(),{roundedClasses:m}=Br(a),h=uo(),g=Xe(a,"modelValue",null,A=>!!A),{ssrBootStyles:w}=fn(),{scopeId:b}=Mr(),f=G(),_=Le(!1),T=x(()=>a.rail&&a.expandOnHover&&_.value?Number(a.width):Number(a.rail?a.railWidth:a.width)),k=x(()=>co(a.location,l.value)),O=x(()=>!a.permanent&&(p.value||a.temporary)),C=x(()=>a.sticky&&!O.value&&k.value!=="bottom");a.expandOnHover&&a.rail!=null&&he(_,A=>n("update:rail",!A)),a.disableResizeWatcher||he(O,A=>!a.permanent&&Ur(()=>g.value=!A)),!a.disableRouteWatcher&&h&&he(h.currentRoute,()=>O.value&&(g.value=!1)),he(()=>a.permanent,A=>{A&&(g.value=!0)}),Gr(()=>{a.modelValue!=null||O.value||(g.value=a.permanent||!p.value)});const{isDragging:L,dragProgress:z,dragStyles:U}=is({isActive:g,isTemporary:O,width:T,touchless:ue(a,"touchless"),position:k}),I=x(()=>{const A=O.value?0:a.rail&&a.expandOnHover?Number(a.railWidth):T.value;return L.value?A*z.value:A}),{layoutItemStyles:W,layoutItemScrimStyles:K}=tl({id:a.name,order:x(()=>parseInt(a.order,10)),position:k,layoutSize:I,elementSize:T,active:x(()=>g.value||L.value),disableTransitions:x(()=>L.value),absolute:x(()=>a.absolute||C.value&&typeof J.value!="string")}),{isStuck:J,stickyStyles:ge}=as({rootEl:f,isSticky:C,layoutItemStyles:W}),ae=Ya(x(()=>typeof a.scrim=="string"?a.scrim:null)),ce=x(()=>({...L.value?{opacity:z.value*.2,transition:"none"}:void 0,...K.value}));va({VList:{bgColor:"transparent"}});function Ce(){_.value=!0}function de(){_.value=!1}return Ee(()=>{const A=r.image||a.image;return d(te,null,[d(a.tag,pe({ref:f,onMouseenter:Ce,onMouseleave:de,class:["v-navigation-drawer",`v-navigation-drawer--${k.value}`,{"v-navigation-drawer--expand-on-hover":a.expandOnHover,"v-navigation-drawer--floating":a.floating,"v-navigation-drawer--is-hovering":_.value,"v-navigation-drawer--rail":a.rail,"v-navigation-drawer--temporary":O.value,"v-navigation-drawer--active":g.value,"v-navigation-drawer--sticky":C.value},o.value,s.value,i.value,u.value,m.value,a.class],style:[c.value,W.value,U.value,w.value,ge.value,a.style]},b,t),{default:()=>{var R,N,Y,H;return[A&&d("div",{key:"image",class:"v-navigation-drawer__img"},[r.image?(R=r.image)==null?void 0:R.call(r,{image:a.image}):d("img",{src:a.image,alt:""},null)]),r.prepend&&d("div",{class:"v-navigation-drawer__prepend"},[(N=r.prepend)==null?void 0:N.call(r)]),d("div",{class:"v-navigation-drawer__content"},[(Y=r.default)==null?void 0:Y.call(r)]),r.append&&d("div",{class:"v-navigation-drawer__append"},[(H=r.append)==null?void 0:H.call(r)])]}}),d(po,{name:"fade-transition"},{default:()=>[O.value&&(L.value||g.value)&&!!a.scrim&&d("div",pe({class:["v-navigation-drawer__scrim",ae.backgroundColorClasses.value],style:[ce.value,ae.backgroundColorStyles.value],onClick:()=>g.value=!1},b),null)]})])}),{isStuck:J}}}),wn=a=>(ya("data-v-d5be678f"),a=a(),ba(),a),cs={class:"lab-logo"},ds={href:"https://github.com/lukashornych/evitalab",target:"_blank"},ps={class:"lab-nav-links"},fs={href:"https://evitadb.io/documentation",target:"_blank"},ms=wn(()=>M("img",{src:Ji,alt:"evitaDB Documentation"},null,-1)),hs={href:"https://discord.gg/VsNBWxgmSw",target:"_blank"},gs=wn(()=>M("img",{src:es,alt:"Discord icon"},null,-1)),vs={href:"https://github.com/lukashornych/evitalab",target:"_blank"},ys=wn(()=>M("img",{src:ts,alt:"GitHub icon"},null,-1)),bs=q({__name:"LabPanel",props:{panel:{}},emits:["update:panel"],setup(a,{emit:e}){const t=G([{title:"Explorer",value:Ka.Explorer,props:{prependIcon:"mdi-connection"}}]);function n(r){r.value?e("update:panel",r.id):e("update:panel",null)}return(r,l)=>(S(),P(nl,{permanent:"",rail:"",class:"bg-primary-dark"},{prepend:y(()=>[M("div",cs,[M("a",ds,[d(Za,{size:"30px"},{default:y(()=>[d(gn,{alt:"evitaLab Logo",width:"30px",height:"30px",src:Zi})]),_:1})])])]),append:y(()=>[M("ul",ps,[M("li",null,[M("a",fs,[ms,d(fe,{activator:"parent"},{default:y(()=>[D(" evitaDB documentation ")]),_:1})])]),M("li",null,[M("a",hs,[gs,d(fe,{activator:"parent"},{default:y(()=>[D(" Discord ")]),_:1})])]),M("li",null,[M("a",vs,[ys,d(fe,{activator:"parent"},{default:y(()=>[D(" Give us a ⭐️ on GitHub ")]),_:1})])])])]),default:y(()=>[d(st,{density:"compact",nav:"",items:t.value,selected:[r.panel],"onClick:select":n,class:"connection-explorer"},null,8,["items","selected"])]),_:1}))}});const _s=se(bs,[["__scopeId","data-v-d5be678f"]]),Ss=a=>(ya("data-v-1bfb882e"),a=a(),ba(),a),Os={class:"tree-view-item__content"},ws={class:"text-truncate"},Ts=Ss(()=>M("span",{class:"text-disabled"}," No items found ",-1)),ks=q({__name:"VTreeViewItem",props:{openable:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},prependIcon:{},loading:{type:Boolean,default:!1},actions:{default:()=>[]}},emits:["click:action"],setup(a,{emit:e}){const t=a,n=G(!1);function r(){t.actions&&t.actions.length>0&&(n.value=!0)}return(l,o)=>(S(),P(et,{"prepend-icon":null,"append-icon":null,onContextmenu:Je(r,["prevent"])},{default:y(()=>[M("div",Os,[l.openable?(S(),P(ne,{key:0},{default:y(()=>[D(j(l.isOpen?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1})):(S(),P(ne,{key:1})),l.loading?(S(),P(Fr,{key:2})):(S(),P(ne,{key:3},{default:y(()=>[D(j(l.prependIcon),1)]),_:1})),M("span",ws,[Ue(l.$slots,"default",{},()=>[Ts],!0)]),l.actions&&l.actions.length>0?(S(),P(_a,{key:4,"menu-items":l.actions,modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=i=>n.value=i)},{activator:y(({props:i})=>[d(ne,pe(i,{class:"text-gray-light"}),{default:y(()=>[D(" mdi-dots-vertical ")]),_:2},1040)]),default:y(()=>[d(st,{density:"compact",items:l.actions,"onClick:select":o[0]||(o[0]=i=>l.$emit("click:action",i.id))},null,8,["items"])]),_:1},8,["menu-items","modelValue"])):ee("",!0)])]),_:3},8,["onContextmenu"]))}});const ia=se(ks,[["__scopeId","data-v-1bfb882e"]]),Ps=q({__name:"VSingleLineCodemirror",props:{modelValue:{},additionalExtensions:{default:()=>[]},prependInnerIcon:{},placeholder:{},disabled:{type:Boolean,default:!1}},emits:["update","update:modelValue","execute"],setup(a,{emit:e}){const t=a,n=[fo(),mo(),ho(),go(),vo(),yo(bo,{fallback:!0}),_o(),So(),Oo(),wo(),To(),ko.of([{key:"Enter",run:()=>(e("execute"),!0)},...Po,...Eo,...Co,...Ao,...xo]),Do,Jt.transactionFilter.of(r=>r.newDoc.lines>1?[]:r),...t.additionalExtensions];return(r,l)=>(S(),X("div",{class:Sa(["cm-oneline",{"cm-oneline--with-prepend-icon":r.prependInnerIcon}])},[r.prependInnerIcon?(S(),P(ne,{key:0,class:"cm-oneline__prepend-inner-icon"},{default:y(()=>[D(j(r.prependInnerIcon),1)]),_:1})):ee("",!0),d(V(Lo),{"model-value":r.modelValue,extensions:n,placeholder:r.placeholder,disabled:r.disabled,onUpdate:l[0]||(l[0]=o=>e("update",o)),"onUpdate:modelValue":l[1]||(l[1]=o=>r.$emit("update:modelValue",o)),style:{cursor:"text","min-width":"0"}},null,8,["model-value","placeholder","disabled"])],2))}});const cr=se(Ps,[["__scopeId","data-v-c8d13bfe"]]);const Tn=Se()({name:"VCardActions",props:at(),setup(a,e){let{slots:t}=e;return va({VBtn:{variant:"text"}}),Ee(()=>{var n;return d("div",{class:["v-card-actions",a.class],style:a.style},[(n=t.default)==null?void 0:n.call(t)])}),{}}}),Es=Oa("v-card-subtitle"),$t=Oa("v-card-title"),Cs=le({appendAvatar:String,appendIcon:Ot,prependAvatar:String,prependIcon:Ot,subtitle:String,title:String,...at(),...vn()},"VCardItem"),As=Se()({name:"VCardItem",props:Cs(),setup(a,e){let{slots:t}=e;return Ee(()=>{var c;const n=!!(a.prependAvatar||a.prependIcon),r=!!(n||t.prepend),l=!!(a.appendAvatar||a.appendIcon),o=!!(l||t.append),i=!!(a.title||t.title),s=!!(a.subtitle||t.subtitle);return d("div",{class:["v-card-item",a.class],style:a.style},[r&&d("div",{key:"prepend",class:"v-card-item__prepend"},[t.prepend?d(oa,{key:"prepend-defaults",disabled:!n,defaults:{VAvatar:{density:a.density,icon:a.prependIcon,image:a.prependAvatar}}},t.prepend):n&&d(Za,{key:"prepend-avatar",density:a.density,icon:a.prependIcon,image:a.prependAvatar},null)]),d("div",{class:"v-card-item__content"},[i&&d($t,{key:"title"},{default:()=>{var u;return[((u=t.title)==null?void 0:u.call(t))??a.title]}}),s&&d(Es,{key:"subtitle"},{default:()=>{var u;return[((u=t.subtitle)==null?void 0:u.call(t))??a.subtitle]}}),(c=t.default)==null?void 0:c.call(t)]),o&&d("div",{key:"append",class:"v-card-item__append"},[t.append?d(oa,{key:"append-defaults",disabled:!l,defaults:{VAvatar:{density:a.density,icon:a.appendIcon,image:a.appendAvatar}}},t.append):l&&d(Za,{key:"append-avatar",density:a.density,icon:a.appendIcon,image:a.appendAvatar},null)])])}),{}}}),Bt=Oa("v-card-text"),xs=le({appendAvatar:String,appendIcon:Ot,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:Ot,ripple:{type:[Boolean,Object],default:!0},subtitle:String,text:String,title:String,...Ir(),...at(),...vn(),...Io(),...Vr(),...Wr(),...Vo(),...$o(),...$r(),...Ro(),...Nt(),...mn(),...No({variant:"elevated"})},"VCard"),ka=Se()({name:"VCard",directives:{Ripple:Bo},props:xs(),setup(a,e){let{attrs:t,slots:n}=e;const{themeClasses:r}=hn(a),{borderClasses:l}=Rr(a),{colorClasses:o,colorStyles:i,variantClasses:s}=Mo(a),{densityClasses:c}=zr(a),{dimensionStyles:u}=Go(a),{elevationClasses:p}=Nr(a),{loaderClasses:m}=Hr(a),{locationStyles:h}=Uo(a),{positionClasses:g}=Fo(a),{roundedClasses:w}=Br(a),b=Wo(a,t),f=x(()=>a.link!==!1&&b.isLink.value),_=x(()=>!a.disabled&&a.link!==!1&&(a.link||b.isClickable.value));return Ee(()=>{const T=f.value?"a":a.tag,k=!!(n.title||a.title),O=!!(n.subtitle||a.subtitle),C=k||O,L=!!(n.append||a.appendAvatar||a.appendIcon),z=!!(n.prepend||a.prependAvatar||a.prependIcon),U=!!(n.image||a.image),I=C||z||L,W=!!(n.text||a.text);return qr(d(T,{class:["v-card",{"v-card--disabled":a.disabled,"v-card--flat":a.flat,"v-card--hover":a.hover&&!(a.disabled||a.flat),"v-card--link":_.value},r.value,l.value,o.value,c.value,p.value,m.value,g.value,w.value,s.value,a.class],style:[i.value,u.value,h.value,a.style],href:b.href.value,onClick:_.value&&b.navigate,tabindex:a.disabled?-1:void 0},{default:()=>{var K;return[U&&d("div",{key:"image",class:"v-card__image"},[n.image?d(oa,{key:"image-defaults",disabled:!a.image,defaults:{VImg:{cover:!0,src:a.image}}},n.image):d(gn,{key:"image-img",cover:!0,src:a.image},null)]),d(Qr,{name:"v-card",active:!!a.loading,color:typeof a.loading=="boolean"?void 0:a.loading},{default:n.loader}),I&&d(As,{key:"item",prependAvatar:a.prependAvatar,prependIcon:a.prependIcon,title:a.title,subtitle:a.subtitle,appendAvatar:a.appendAvatar,appendIcon:a.appendIcon},{default:n.item,prepend:n.prepend,title:n.title,subtitle:n.subtitle,append:n.append}),W&&d(Bt,{key:"text"},{default:()=>{var J;return[((J=n.text)==null?void 0:J.call(n))??a.text]}}),(K=n.default)==null?void 0:K.call(n),n.actions&&d(Tn,null,{default:n.actions}),Ho(_.value,"v-card")]}}),[[zo("ripple"),_.value&&a.ripple]])}),{}}}),Ds={class:"title-container"},Ls={class:"title-container__actions"},Is=q({__name:"VCardTitleWithActions",setup(a){return(e,t)=>(S(),P($t,null,{default:y(()=>[M("div",Ds,[M("span",null,[Ue(e.$slots,"default",{},void 0,!0)]),M("div",Ls,[Ue(e.$slots,"actions",{},void 0,!0)])])]),_:3}))}});const rl=se(Is,[["__scopeId","data-v-d57f233d"]]),Vs={};function $s(a,e){return S(),P(et,{disabled:""},{title:y(()=>[D(" No items found for searched term. ")]),_:1})}const Rs=se(Vs,[["render",$s]]),Ns=q({__name:"LabEditorDataGridPropertySelectorSection",props:{gridProps:{},title:{},propertyType:{},selected:{},filteredPropertyDescriptors:{},propertyDescriptors:{},selection:{}},emits:["toggle"],setup(a,{emit:e}){const t=a;function n(){t.selection!==we.None?e("toggle",we.None):e("toggle",we.All)}return(r,l)=>r.propertyDescriptors.length>0?(S(),P(wa,{key:0,value:r.propertyType},{activator:y(({props:o})=>[d(et,yn(bn(o)),{prepend:y(()=>[d(al,{start:""},{default:y(()=>[d(ie,{icon:"",variant:"text",onClick:Je(n,["stop"])},{default:y(()=>[r.selection===V(we).None?(S(),P(ne,{key:0,class:"partial-selection"},{default:y(()=>[D(" mdi-checkbox-blank-outline ")]),_:1})):r.selection===V(we).Some?(S(),P(ne,{key:1,class:"partial-selection"},{default:y(()=>[D(" mdi-minus-box ")]),_:1})):r.selection===V(we).All?(S(),P(ne,{key:2},{default:y(()=>[D("mdi-checkbox-marked")]),_:1})):ee("",!0)]),_:1},8,["onClick"])]),_:1})]),title:y(()=>[D(j(r.title)+" ("+j(r.selected.length||0)+"/"+j(r.propertyDescriptors.length)+") ",1)]),_:2},1040)]),default:y(()=>[r.filteredPropertyDescriptors.length>0?(S(!0),X(te,{key:0},ke(r.filteredPropertyDescriptors,(o,i)=>(S(),X(te,{key:o.key.toString()},[Ue(r.$slots,"default",{property:o},void 0,!0),i<r.filteredPropertyDescriptors.length-1?(S(),P(_t,{key:0,inset:""})):ee("",!0)],64))),128)):(S(),P(Rs,{key:1}))]),_:3},8,["value"])):ee("",!0)}});const Qt=se(Ns,[["__scopeId","data-v-ca267691"]]),Bs={class:"item-title"},Ms={class:"item-description"},Gs=q({__name:"LabEditorDataGridPropertySelectorSectionItem",props:{value:{},title:{},description:{default:void 0},flags:{default:()=>[]},openable:{type:Boolean,default:!1},groupParent:{type:Boolean,default:!1}},emits:["toggle","schemaOpen"],setup(a,{emit:e}){return(t,n)=>(S(),P(et,{value:t.value},qo({prepend:y(({isSelected:r})=>[d(al,{start:""},{default:y(()=>[d(Ta,{"model-value":r,onClickPassive:l=>e("toggle",{key:t.value,selected:r})},null,8,["model-value","onClickPassive"])]),_:2},1024)]),title:y(()=>[M("div",Bs,[M("span",null,j(t.title),1),t.flags?(S(),P(Qo,{key:0},{default:y(()=>[(S(!0),X(te,null,ke(t.flags,r=>(S(),P(Xo,{key:r,class:"text-sm-body-2"},{default:y(()=>[D(j(r),1)]),_:2},1024))),128))]),_:1})):ee("",!0)])]),_:2},[t.description?{name:"subtitle",fn:y(()=>[M("div",Ms,[D(j(t.description)+" ",1),d(fe,{activator:"parent","max-width":"500"},{default:y(()=>[d(_n,{source:t.description},null,8,["source"])]),_:1})])]),key:"0"}:void 0,t.openable?{name:"append",fn:y(({isActive:r})=>[d(ie,{icon:"",variant:"text",onClick:n[0]||(n[0]=Je(l=>e("schemaOpen"),["stop"]))},{default:y(()=>[d(ne,null,{default:y(()=>[D("mdi-open-in-new")]),_:1}),d(fe,{activator:"parent"},{default:y(()=>[D(" Open schema ")]),_:1})]),_:1}),t.groupParent?(S(),P(ne,{key:0,class:"item-group-parent-chevron--with-actions"},{default:y(()=>[D(j(r?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:2},1024)):ee("",!0)]),key:"1"}:void 0]),1032,["value"]))}});const Mt=se(Gs,[["__scopeId","data-v-aaec9f83"]]),Us=q({__name:"LabEditorDataGridPropertySelectorSectionAttributeItem",props:{gridProps:{},propertyDescriptor:{}},emits:["schemaOpen"],setup(a,{emit:e}){const t=a,n=Fe(),r=We(),l=n.getAttributeSchemaFlags(t.propertyDescriptor.schema);function o(){r.createTabRequest(new ut(t.gridProps.params.dataPointer.connection,new jo(t.gridProps.params.dataPointer.catalogName,t.gridProps.params.dataPointer.entityType,t.propertyDescriptor.schema.name))),e("schemaOpen")}return(i,s)=>{var c;return S(),P(Mt,{value:i.propertyDescriptor.key,title:i.propertyDescriptor.title,description:(c=i.propertyDescriptor.schema)==null?void 0:c.description,flags:V(l),openable:"",onSchemaOpen:o},null,8,["value","title","description","flags"])}}}),Fs=q({__name:"LabEditorDataGridPropertySelectorSectionAssociatedDataItem",props:{gridProps:{},propertyDescriptor:{}},emits:["schemaOpen"],setup(a,{emit:e}){const t=a,n=Fe(),r=We(),l=n.getAssociatedDataSchemaFlags(t.propertyDescriptor.schema);function o(){r.createTabRequest(new ut(t.gridProps.params.dataPointer.connection,new Yo(t.gridProps.params.dataPointer.catalogName,t.gridProps.params.dataPointer.entityType,t.propertyDescriptor.schema.name))),e("schemaOpen")}return(i,s)=>{var c;return S(),P(Mt,{value:i.propertyDescriptor.key,title:i.propertyDescriptor.title,description:(c=i.propertyDescriptor.schema)==null?void 0:c.description,flags:V(l),openable:"",onSchemaOpen:o},null,8,["value","title","description","flags"])}}}),Ws=q({__name:"LabEditorDataGridPropertySelectorSectionEntityItem",props:{gridProps:{},propertyDescriptor:{}},emits:["schemaOpen"],setup(a,{emit:e}){const t=a,n=We();function r(){n.createTabRequest(new ut(t.gridProps.params.dataPointer.connection,new Xr(t.gridProps.params.dataPointer.catalogName,t.gridProps.params.dataPointer.entityType))),e("schemaOpen")}return(l,o)=>(S(),P(Mt,{value:l.propertyDescriptor.key,title:l.propertyDescriptor.title,openable:"",onSchemaOpen:r},null,8,["value","title"]))}}),dr=q({__name:"LabEditorDataGridPropertySelectorSectionReferenceItem",props:{gridProps:{},propertyDescriptor:{},groupParent:{type:Boolean,default:!1}},emits:["toggle","schemaOpen"],setup(a,{emit:e}){const t=a,n=Fe(),r=We(),l=n.getReferenceSchemaFlags(t.propertyDescriptor.schema);function o(){r.createTabRequest(new ut(t.gridProps.params.dataPointer.connection,new Ko(t.gridProps.params.dataPointer.catalogName,t.gridProps.params.dataPointer.entityType,t.propertyDescriptor.schema.name))),e("schemaOpen")}return(i,s)=>{var c;return S(),P(Mt,{value:i.propertyDescriptor.key,title:i.propertyDescriptor.title,description:(c=i.propertyDescriptor.schema)==null?void 0:c.description,flags:V(l),openable:"","group-parent":i.groupParent,onToggle:s[0]||(s[0]=u=>e("toggle",u)),onSchemaOpen:o},null,8,["value","title","description","flags","group-parent"])}}}),zs={name:"Hotkeys",data:()=>({supportedShortcuts:[]}),props:{shortcuts:{type:Array,required:!0},debug:{type:Boolean,default:!1}},methods:{onUseKeyboardShortcuts(a){const e=a.keyCode||a.which,t=window.navigator.platform.match("Mac")?a.metaKey:a.ctrlKey,n=this.supportedShortcuts.some(({keyCode:r})=>r===e);if(t&&n){const{keyString:r}=this.supportedShortcuts.find(({keyCode:l})=>l===e);this.debug&&console.log(`CMD (CTRL) + ${r} (${e}) pressed`),this.$emit("triggered",{key:e,keyString:r}),a.preventDefault()}}},created(){this.shortcuts&&this.shortcuts.length&&this.shortcuts.forEach(a=>{a&&(a=="ArrowLeft"?this.supportedShortcuts.push({keyString:a,keyCode:37}):a=="ArrowRight"?this.supportedShortcuts.push({keyString:a,keyCode:39}):a=="ArrowUp"?this.supportedShortcuts.push({keyString:a,keyCode:38}):a=="ArrowDown"?this.supportedShortcuts.push({keyString:a,keyCode:40}):this.supportedShortcuts.push({keyString:a,keyCode:a.charCodeAt(0)}))})},mounted(){document.addEventListener("keydown",this.onUseKeyboardShortcuts,!1),this.debug&&console.log("Vue Keyboard Shortcuts ENABLED")},beforeDestroy(){document.removeEventListener("keydown",this.onUseKeyboardShortcuts),this.debug&&console.log("Vue Keyboard Shortcuts DISABLED")}};function Hs(a,e,t,n,r,l){return null}const qs=se(zs,[["render",Hs]]),Qs=q({__name:"LabEditorDataGridPropertySelectorSectionReferenceAttributeItem",props:{gridProps:{},referencePropertyDescriptor:{},attributePropertyDescriptor:{}},emits:["toggle","schemaOpen"],setup(a,{emit:e}){const t=a,n=Fe(),r=We(),l=n.getAttributeSchemaFlags(t.attributePropertyDescriptor.schema);function o(){r.createTabRequest(new ut(t.gridProps.params.dataPointer.connection,new Zo(t.gridProps.params.dataPointer.catalogName,t.gridProps.params.dataPointer.entityType,t.referencePropertyDescriptor.schema.name,t.attributePropertyDescriptor.schema.name))),e("schemaOpen")}return(i,s)=>{var c;return S(),P(Mt,{value:i.attributePropertyDescriptor.key,title:i.attributePropertyDescriptor.title,description:(c=i.attributePropertyDescriptor.schema)==null?void 0:c.description,flags:V(l),openable:"",onToggle:s[0]||(s[0]=u=>e("toggle",u)),onSchemaOpen:o},null,8,["value","title","description","flags"])}}}),Xs=q({__name:"LabEditorDataGridPropertySelectorSectionItemGroup",props:{filteredPropertyDescriptors:{},propertyDescriptors:{}},setup(a){return(e,t)=>(S(),P(wa,null,{activator:y(({props:n})=>[Ue(e.$slots,"activator",{props:n})]),default:y(()=>[(S(!0),X(te,null,ke(e.filteredPropertyDescriptors,(n,r)=>(S(),X(te,{key:n.key.toString()},[Ue(e.$slots,"child",{childProperty:n}),r<e.filteredPropertyDescriptors.length-1?(S(),P(_t,{key:0,inset:""})):ee("",!0)],64))),128))]),_:3}))}});const js=le({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...Jo({origin:"center center",scrollStrategy:"block",transition:{component:ei},zIndex:2400})},"VDialog"),kn=Se()({name:"VDialog",props:js(),emits:{"update:modelValue":a=>!0},setup(a,e){let{slots:t}=e;const n=Xe(a,"modelValue"),{scopeId:r}=Mr(),l=G();function o(s){var p,m;const c=s.relatedTarget,u=s.target;if(c!==u&&((p=l.value)!=null&&p.contentEl)&&((m=l.value)!=null&&m.globalTop)&&![document,l.value.contentEl].includes(u)&&!l.value.contentEl.contains(u)){const h=ai(l.value.contentEl);if(!h.length)return;const g=h[0],w=h[h.length-1];c===g?w.focus():g.focus()}}ti&&he(()=>n.value&&a.retainFocus,s=>{s?document.addEventListener("focusin",o):document.removeEventListener("focusin",o)},{immediate:!0}),he(n,async s=>{var c,u;await Ur(),s?(c=l.value.contentEl)==null||c.focus({preventScroll:!0}):(u=l.value.activatorEl)==null||u.focus({preventScroll:!0})});const i=x(()=>pe({"aria-haspopup":"dialog","aria-expanded":String(n.value)},a.activatorProps));return Ee(()=>{const[s]=Jn.filterProps(a);return d(Jn,pe({ref:l,class:["v-dialog",{"v-dialog--fullscreen":a.fullscreen,"v-dialog--scrollable":a.scrollable},a.class],style:a.style},s,{modelValue:n.value,"onUpdate:modelValue":c=>n.value=c,"aria-modal":"true",activatorProps:i.value,role:"dialog"},r),{activator:t.activator,default:function(){for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return d(oa,{root:"VDialog"},{default:()=>{var m;return[(m=t.default)==null?void 0:m.call(t,...u)]}})}})}),jr({},l)}}),Ys=q({__name:"LabEditorDataGridPropertySelector",props:{gridProps:{},modelValue:{type:Boolean},selected:{},propertyDescriptorIndex:{}},emits:["update:modelValue","update:selected","schemaOpen"],setup(a,{emit:e}){const t=a,n=[F.Entity,F.Attributes,F.AssociatedData,F.References],r=Be(),l=G(""),o=G(null),i=x(()=>{const b=new Map;return t.propertyDescriptorIndex.forEach(f=>{var _;n.includes(f.type)&&(b.has(f.type)||b.set(f.type,[]),(_=b.get(f.type))==null||_.push(f))}),b}),s=x(()=>{const b=new Map;for(const[f,_]of i.value){const T=_.filter(k=>k.title.toLowerCase().includes(l.value)||k.children.find(O=>O.title.toLowerCase().includes(l.value))!=null);b.set(f,T)}return b}),c=x(()=>{const b=new Map;return t.selected.forEach(f=>{var _;b.has(f.type)||b.set(f.type,[]),(_=b.get(f.type))==null||_.push(f)}),b}),u=x(()=>{var f;const b=new Map;for(const[_,T]of c.value){let k;T.length===0?k=we.None:T.length===((f=i.value.get(_))==null?void 0:f.length)?k=we.All:k=we.Some,b.set(_,k)}return b}),p=G([]);function m(b){if(l.value=b.toLowerCase(),b.length===0)p.value=[];else{const f=[];s.value.size>0&&((s.value.get(F.Entity)||[]).length>0&&f.push(F.Entity),(s.value.get(F.Attributes)||[]).length>0&&f.push(F.Attributes),(s.value.get(F.AssociatedData)||[]).length>0&&f.push(F.AssociatedData),(s.value.get(F.References)||[]).length>0&&f.push(F.References)),p.value=f}}function h(b,f){var _;if(f===we.None){const T=t.selected.filter(k=>{if(k.type===b)return!1;const O=ni.get(k.type);return!(O!=null&&O===b)});e("update:selected",T)}else if(f===we.All){const T=((_=i.value.get(b))==null?void 0:_.flatMap(O=>[O.key,...O.children.map(C=>C.key)]))||[],k=[...t.selected];k.push(...T),e("update:selected",k)}else r.error(new tt(t.gridProps.params.dataPointer.connection,"Cannot select `Some` properties in a section."))}function g(b){if(t.selected.find(f=>f.toString()===b.toString())){const f=t.selected.filter(_=>!(_.toString()===b.toString()||t.propertyDescriptorIndex.get(b.toString()).children.find(k=>_.toString()===k.key.toString())!=null));e("update:selected",f)}else{const f=[...t.selected];f.push(b),e("update:selected",f)}}function w(b,f){if(!f){if(t.selected.find(T=>T.toString()===b.key.toString()))return;const _=[...t.selected];_.push(b.key),e("update:selected",_)}}return(b,f)=>(S(),P(kn,{"model-value":b.modelValue,"onUpdate:modelValue":f[15]||(f[15]=_=>e("update:modelValue",_)),"max-width":"60rem",scrollable:""},{activator:y(({props:_})=>[d(ie,pe({icon:"",density:"comfortable"},_),{default:y(()=>[d(ne,null,{default:y(()=>[D("mdi-view-column-outline")]),_:1}),d(fe,{activator:"parent"},{default:y(()=>[D(" Select displayed properties ")]),_:1})]),_:2},1040)]),default:y(()=>[d(ka,{class:"py-8 px-4"},{default:y(()=>[d(rl,null,{default:y(()=>[D(" Displayed properties ")]),actions:y(()=>[d(ie,{icon:"",variant:"flat",density:"compact",onClick:f[0]||(f[0]=_=>e("update:modelValue",!1))},{default:y(()=>[d(ne,null,{default:y(()=>[D("mdi-close")]),_:1}),d(fe,{activator:"parent"},{default:y(()=>[D(" Close selector ")]),_:1})]),_:1})]),_:1}),d(Bt,{class:"selector-body pt-0 pl-4 mt-4"},{default:y(()=>[d(qs,{shortcuts:["F"],onTriggered:f[1]||(f[1]=_=>{var T;return(T=o.value)==null?void 0:T.select()})}),d(ea,{ref_key:"filterInput",ref:o,"model-value":l.value,label:"Filter properties",variant:"solo-filled",density:"compact",autofocus:"","append-inner-icon":l.value?"mdi-close-circle-outline":null,"onUpdate:modelValue":f[2]||(f[2]=_=>m(_)),"onClick:appendInner":f[3]||(f[3]=_=>m("")),class:"filter-input"},null,8,["model-value","append-inner-icon"]),d(st,{selected:b.selected,"onUpdate:selected":f[13]||(f[13]=_=>e("update:selected",_)),opened:p.value,"onUpdate:opened":f[14]||(f[14]=_=>p.value=_),lines:"two","open-strategy":"multiple","select-strategy":"classic",class:"property-list"},{default:y(()=>[d(Qt,{"grid-props":b.gridProps,title:"Entity","property-type":V(F).Entity,selected:c.value.get(V(F).Entity)||[],"filtered-property-descriptors":s.value.get(V(F).Entity)||[],"property-descriptors":i.value.get(V(F).Entity)||[],selection:u.value.get(V(F).Entity)||V(we).None,onToggle:f[5]||(f[5]=_=>h(V(F).Entity,_))},{default:y(({property:_})=>[d(Ws,{"grid-props":b.gridProps,"property-descriptor":_,onSchemaOpen:f[4]||(f[4]=T=>e("schemaOpen"))},null,8,["grid-props","property-descriptor"])]),_:1},8,["grid-props","property-type","selected","filtered-property-descriptors","property-descriptors","selection"]),d(_t),d(Qt,{"grid-props":b.gridProps,title:"Attributes","property-type":V(F).Attributes,selected:c.value.get(V(F).Attributes)||[],"filtered-property-descriptors":s.value.get(V(F).Attributes)||[],"property-descriptors":i.value.get(V(F).Attributes)||[],selection:u.value.get(V(F).Attributes)||V(we).None,onToggle:f[7]||(f[7]=_=>h(V(F).Attributes,_))},{default:y(({property:_})=>[d(Us,{"grid-props":b.gridProps,"property-descriptor":_,onSchemaOpen:f[6]||(f[6]=T=>e("schemaOpen"))},null,8,["grid-props","property-descriptor"])]),_:1},8,["grid-props","property-type","selected","filtered-property-descriptors","property-descriptors","selection"]),d(_t),d(Qt,{"grid-props":b.gridProps,title:"Associated data","property-type":V(F).AssociatedData,selected:c.value.get(V(F).AssociatedData)||[],"filtered-property-descriptors":s.value.get(V(F).AssociatedData)||[],"property-descriptors":i.value.get(V(F).AssociatedData)||[],selection:u.value.get(V(F).AssociatedData)||V(we).None,onToggle:f[9]||(f[9]=_=>h(V(F).AssociatedData,_))},{default:y(({property:_})=>[d(Fs,{"grid-props":b.gridProps,"property-descriptor":_,onSchemaOpen:f[8]||(f[8]=T=>e("schemaOpen"))},null,8,["grid-props","property-descriptor"])]),_:1},8,["grid-props","property-type","selected","filtered-property-descriptors","property-descriptors","selection"]),d(_t),d(Qt,{"grid-props":b.gridProps,title:"References","property-type":V(F).References,selected:c.value.get(V(F).References)||[],"filtered-property-descriptors":s.value.get(V(F).References)||[],"property-descriptors":i.value.get(V(F).References)||[],selection:u.value.get(V(F).References)||V(we).None,onToggle:f[12]||(f[12]=_=>h(V(F).References,_))},{default:y(({property:_})=>[_.children.length===0?(S(),P(dr,{key:0,"grid-props":b.gridProps,"property-descriptor":_,onSchemaOpen:f[10]||(f[10]=T=>e("schemaOpen"))},null,8,["grid-props","property-descriptor"])):(S(),P(Xs,{key:1,"filtered-property-descriptors":_.children,"property-descriptors":_.children},{activator:y(({props:T})=>[d(dr,pe({"grid-props":b.gridProps,"property-descriptor":_},T,{"group-parent":"",onToggle:k=>g(_.key),onSchemaOpen:f[11]||(f[11]=k=>e("schemaOpen"))}),null,16,["grid-props","property-descriptor","onToggle"])]),child:y(({childProperty:T})=>[d(Qs,{"grid-props":b.gridProps,"reference-property-descriptor":_,"attribute-property-descriptor":T,onToggle:k=>w(_,k.selected)},null,8,["grid-props","reference-property-descriptor","attribute-property-descriptor","onToggle"])]),_:2},1032,["filtered-property-descriptors","property-descriptors"]))]),_:1},8,["grid-props","property-type","selected","filtered-property-descriptors","property-descriptors","selection"])]),_:1},8,["selected","opened"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}});const Ks=se(Ys,[["__scopeId","data-v-aa21dfc3"]]),Zs=q({__name:"LabEditorDataGridDataLocaleSelector",props:{selected:{},dataLocales:{}},emits:["update:selected"],setup(a,{emit:e}){function t(n){if(n.length>0){const r=n[0];r==="none"?e("update:selected",void 0):e("update:selected",r)}else e("update:selected",void 0)}return(n,r)=>(S(),P(ie,{icon:"",density:"comfortable"},{default:y(()=>[n.selected?(S(),P(ne,{key:1},{default:y(()=>[D("mdi-translate")]),_:1})):(S(),P(ne,{key:0},{default:y(()=>[D("mdi-translate-off")]),_:1})),d(fe,{activator:"parent"},{default:y(()=>[D(" Select data locale ")]),_:1}),d(_a,{activator:"parent"},{default:y(()=>[d(st,{selected:[n.selected?n.selected:"none"],density:"compact","min-width":"100","onUpdate:selected":t},{default:y(()=>[d(et,{value:"none"},{default:y(()=>[d(Ja,null,{default:y(()=>[D("None")]),_:1})]),_:1}),d(_t),(S(!0),X(te,null,ke(n.dataLocales,l=>(S(),P(et,{key:l,value:l},{default:y(()=>[d(Ja,null,{default:y(()=>[D(j(l),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["selected"])]),_:1})]),_:1}))}}),Js=q({__name:"LabEditorDataGridQueryLanguageSelector",props:{selected:{}},emits:["update:selected"],setup(a,{emit:e}){const t=a,n=[{title:"EvitaQL",icon:"mdi-application-braces-outline",value:St.EvitaQL},{title:"GraphQL",icon:"mdi-graphql",value:St.GraphQL}],r=x(()=>{const l=n.find(o=>o.value===t.selected);return l?l.icon:"mdi-application-braces-outline"});return(l,o)=>(S(),P(ie,{icon:"",density:"comfortable"},{default:y(()=>[d(ne,null,{default:y(()=>[D(j(r.value),1)]),_:1}),d(fe,{activator:"parent"},{default:y(()=>[D("Select query language")]),_:1}),d(_a,{activator:"parent"},{default:y(()=>[d(st,{selected:[l.selected],density:"compact","onUpdate:selected":o[0]||(o[0]=i=>e("update:selected",i.length>0?i[0]:V(St).EvitaQL))},{default:y(()=>[(S(),X(te,null,ke(n,i=>d(et,{key:i.value,value:i.value},{prepend:y(()=>[d(ne,null,{default:y(()=>[D(j(i.icon),1)]),_:2},1024)]),default:y(()=>[d(Ja,null,{default:y(()=>[D(j(i.title),1)]),_:2},1024)]),_:2},1032,["value"])),64))]),_:1},8,["selected"])]),_:1})]),_:1}))}}),eu={class:"query-input"},tu={class:"query-input__input"},au={class:"query-input__input"},nu=q({__name:"LabEditorDataGridQueryInput",props:{gridProps:{},selectedQueryLanguage:{},filterBy:{},orderBy:{},dataLocales:{},selectedDataLocale:{},entityPropertyDescriptorIndex:{},selectedEntityPropertyKeys:{}},emits:["executeQuery","update:selectedQueryLanguage","update:filterBy","update:orderBy","update:selectedDataLocale","update:selectedEntityPropertyKeys"],setup(a,{emit:e}){const t=a,n=G(),r=new nr,l=[r.of(c(t.selectedQueryLanguage))],o=G(),i=new nr,s=[i.of(u(t.selectedQueryLanguage))];he(()=>t.selectedQueryLanguage,m=>{var h,g;(h=n.value)==null||h.dispatch({effects:r.reconfigure(c(m))}),(g=o.value)==null||g.dispatch({effects:i.reconfigure(u(m))})});function c(m){return m===St.EvitaQL?er({mode:new tr(ar.Filter)}):[]}function u(m){return m===St.EvitaQL?er({mode:new tr(ar.Order)}):[]}const p=G(!1);return(m,h)=>(S(),X("div",eu,[d(Js,{selected:m.selectedQueryLanguage,"onUpdate:selected":h[0]||(h[0]=g=>e("update:selectedQueryLanguage",g))},null,8,["selected"]),M("div",tu,[d(cr,{"model-value":m.filterBy,"prepend-inner-icon":"mdi-filter-outline",placeholder:"Filter by","onUpdate:modelValue":h[1]||(h[1]=g=>e("update:filterBy",g)),onUpdate:h[2]||(h[2]=g=>n.value=g.view),"additional-extensions":l,onExecute:h[3]||(h[3]=g=>e("executeQuery")),class:"text-gray-light"},null,8,["model-value"])]),M("div",au,[d(cr,{"model-value":m.orderBy,"prepend-inner-icon":"mdi-sort",placeholder:"Order by","onUpdate:modelValue":h[4]||(h[4]=g=>e("update:orderBy",g)),onUpdate:h[5]||(h[5]=g=>o.value=g.view),"additional-extensions":s,onExecute:h[6]||(h[6]=g=>e("executeQuery")),class:"text-gray-light"},null,8,["model-value"])]),d(Zs,{selected:m.selectedDataLocale,"onUpdate:selected":h[7]||(h[7]=g=>e("update:selectedDataLocale",g)),"data-locales":m.dataLocales},null,8,["selected","data-locales"]),d(Ks,{modelValue:p.value,"onUpdate:modelValue":h[8]||(h[8]=g=>p.value=g),"grid-props":m.gridProps,"property-descriptor-index":m.entityPropertyDescriptorIndex,selected:m.selectedEntityPropertyKeys,"onUpdate:selected":h[9]||(h[9]=g=>e("update:selectedEntityPropertyKeys",g)),onSchemaOpen:h[10]||(h[10]=g=>p.value=!1)},null,8,["modelValue","grid-props","property-descriptor-index","selected"])]))}});const ru=se(nu,[["__scopeId","data-v-b3b0bf64"]]),lu=q({__name:"LabEditorDataGridToolbar",props:{path:{},locale:{},loading:{type:Boolean}},emits:["executeQuery"],setup(a,{emit:e}){const t=a,n=x(()=>{const r=[];return t.locale&&r.push({title:t.locale,prependIcon:"mdi-translate"}),r});return(r,l)=>(S(),P(li,{"prepend-icon":"mdi-text-box-edit-outline",path:r.path,flags:n.value},{append:y(()=>[d(ri,{loading:r.loading,onClick:l[0]||(l[0]=o=>e("executeQuery"))},null,8,["loading"])]),extension:y(()=>[Ue(r.$slots,"query")]),_:3},8,["path","flags"]))}});const ll=le({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),ol=Symbol.for("vuetify:data-table-pagination");function il(a){const e=Xe(a,"page",void 0,n=>+(n??1)),t=Xe(a,"itemsPerPage",void 0,n=>+(n??10));return{page:e,itemsPerPage:t}}function sl(a){const{page:e,itemsPerPage:t,itemsLength:n}=a,r=x(()=>t.value===-1?0:t.value*(e.value-1)),l=x(()=>t.value===-1?n.value:Math.min(n.value,r.value+t.value)),o=x(()=>t.value===-1||n.value===0?1:Math.ceil(n.value/t.value));ga(()=>{e.value>o.value&&(e.value=o.value)});function i(m){t.value=m,e.value=1}function s(){e.value=Zt(e.value+1,1,o.value)}function c(){e.value=Zt(e.value-1,1,o.value)}function u(m){e.value=Zt(m,1,o.value)}const p={page:e,itemsPerPage:t,startIndex:r,stopIndex:l,pageCount:o,itemsLength:n,nextPage:s,prevPage:c,setPage:u,setItemsPerPage:i};return Ye(ol,p),p}function ou(){const a=je(ol);if(!a)throw new Error("Missing pagination!");return a}function iu(a){const{items:e,startIndex:t,stopIndex:n,itemsPerPage:r}=a;return{paginatedItems:x(()=>r.value<=0?e.value:e.value.slice(t.value,n.value))}}const Pn=le({prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},firstIcon:{type:String,default:"$first"},lastIcon:{type:String,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),sa=Se()({name:"VDataTableFooter",props:Pn(),setup(a,e){let{slots:t}=e;const{t:n}=Sn(),{page:r,pageCount:l,startIndex:o,stopIndex:i,itemsLength:s,itemsPerPage:c,setItemsPerPage:u}=ou(),p=x(()=>a.itemsPerPageOptions.map(m=>({...m,title:n(m.title)})));return()=>{var m;return d("div",{class:"v-data-table-footer"},[(m=t.prepend)==null?void 0:m.call(t),d("div",{class:"v-data-table-footer__items-per-page"},[d("span",null,[n(a.itemsPerPageText)]),d(oi,{items:p.value,modelValue:c.value,"onUpdate:modelValue":h=>u(Number(h)),density:"compact",variant:"outlined","hide-details":!0},null)]),d("div",{class:"v-data-table-footer__info"},[d("div",null,[n(a.pageText,s.value?o.value+1:0,i.value,s.value)])]),d("div",{class:"v-data-table-footer__pagination"},[d(ie,{icon:a.firstIcon,variant:"plain",onClick:()=>r.value=1,disabled:r.value===1,"aria-label":n(a.firstPageLabel)},null),d(ie,{icon:a.prevIcon,variant:"plain",onClick:()=>r.value=Math.max(1,r.value-1),disabled:r.value===1,"aria-label":n(a.prevPageLabel)},null),a.showCurrentPage&&d("span",{key:"page",class:"v-data-table-footer__page"},[r.value]),d(ie,{icon:a.nextIcon,variant:"plain",onClick:()=>r.value=Math.min(l.value,r.value+1),disabled:r.value===l.value,"aria-label":n(a.nextPageLabel)},null),d(ie,{icon:a.lastIcon,variant:"plain",onClick:()=>r.value=l.value,disabled:r.value===l.value,"aria-label":n(a.lastPageLabel)},null)])])}}}),En=ii({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String]},(a,e)=>{let{slots:t,attrs:n}=e;const r=a.tag??"td";return d(r,pe({class:["v-data-table__td",{"v-data-table-column--fixed":a.fixed,"v-data-table-column--last-fixed":a.lastFixed,"v-data-table-column--no-padding":a.noPadding},`v-data-table-column--align-${a.align}`],style:{height:Ze(a.height),width:Ze(a.width),left:Ze(a.fixedOffset||null)}},n),{default:()=>{var l;return[(l=t.default)==null?void 0:l.call(t)]}})}),su=le({headers:{type:Array,default:()=>[]}},"DataTable-header"),ul=Symbol.for("vuetify:data-table-headers");function cl(a,e){const t=G([]),n=G([]);ga(()=>{var h,g,w;const l=a.headers.length?Array.isArray(a.headers[0])?a.headers:[a.headers]:[],o=l.flatMap((b,f)=>b.map(_=>({column:_,row:f}))),i=l.length,s={title:"",sortable:!1},c={...s,width:48};if((h=e==null?void 0:e.groupBy)!=null&&h.value.length){const b=o.findIndex(f=>{let{column:_}=f;return _.key==="data-table-group"});b<0?o.unshift({column:{...s,key:"data-table-group",title:"Group",rowspan:i},row:0}):o.splice(b,1,{column:{...s,...o[b].column},row:o[b].row})}if((g=e==null?void 0:e.showSelect)!=null&&g.value){const b=o.findIndex(f=>{let{column:_}=f;return _.key==="data-table-select"});b<0?o.unshift({column:{...c,key:"data-table-select",rowspan:i},row:0}):o.splice(b,1,{column:{...c,...o[b].column},row:o[b].row})}if((w=e==null?void 0:e.showExpand)!=null&&w.value){const b=o.findIndex(f=>{let{column:_}=f;return _.key==="data-table-expand"});b<0?o.push({column:{...c,key:"data-table-expand",rowspan:i},row:0}):o.splice(b,1,{column:{...c,...o[b].column},row:o[b].row})}const u=rr(i).map(()=>[]),p=rr(i).fill(0);o.forEach(b=>{let{column:f,row:_}=b,T=f.key;T==null&&(T="");for(let k=_;k<=_+(f.rowspan??1)-1;k++)u[k].push({...f,key:T,fixedOffset:p[k],sortable:f.sortable??!!f.key}),p[k]+=Number(f.width??0)}),u.forEach(b=>{for(let f=b.length;f--;f>=0)if(b[f].fixed){b[f].lastFixed=!0;return}});const m=new Set;t.value=u.map(b=>{const f=[];for(const _ of b)m.has(_.key)||(m.add(_.key),f.push(_));return f}),n.value=u.at(-1)??[]});const r={headers:t,columns:n};return Ye(ul,r),r}function Pa(){const a=je(ul);if(!a)throw new Error("Missing headers!");return a}const uu={showSelectAll:!1,allSelected:()=>[],select:a=>{var n;let{items:e,value:t}=a;return new Set(t?[(n=e[0])==null?void 0:n.value]:[])},selectAll:a=>{let{selected:e}=a;return e}},dl={showSelectAll:!0,allSelected:a=>{let{currentPage:e}=a;return e},select:a=>{let{items:e,value:t,selected:n}=a;for(const r of e)t?n.add(r.value):n.delete(r.value);return n},selectAll:a=>{let{value:e,currentPage:t,selected:n}=a;return dl.select({items:t,value:e,selected:n})}},pl={showSelectAll:!0,allSelected:a=>{let{allItems:e}=a;return e},select:a=>{let{items:e,value:t,selected:n}=a;for(const r of e)t?n.add(r.value):n.delete(r.value);return n},selectAll:a=>{let{value:e,allItems:t,selected:n}=a;return pl.select({items:t,value:e,selected:n})}},cu=le({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]}},"DataTable-select"),fl=Symbol.for("vuetify:data-table-selection");function ml(a,e){let{allItems:t,currentPage:n}=e;const r=Xe(a,"modelValue",a.modelValue,b=>new Set(b),b=>[...b.values()]),l=x(()=>t.value.filter(b=>b.selectable)),o=x(()=>n.value.filter(b=>b.selectable)),i=x(()=>{if(typeof a.selectStrategy=="object")return a.selectStrategy;switch(a.selectStrategy){case"single":return uu;case"all":return pl;case"page":default:return dl}});function s(b){return en(b).every(f=>r.value.has(f.value))}function c(b){return en(b).some(f=>r.value.has(f.value))}function u(b,f){const _=i.value.select({items:b,value:f,selected:new Set(r.value)});r.value=_}function p(b){u([b],!s([b]))}function m(b){const f=i.value.selectAll({value:b,allItems:l.value,currentPage:o.value,selected:new Set(r.value)});r.value=f}const h=x(()=>r.value.size>0),g=x(()=>{const b=i.value.allSelected({allItems:l.value,currentPage:o.value});return s(b)}),w={toggleSelect:p,select:u,selectAll:m,isSelected:s,isSomeSelected:c,someSelected:h,allSelected:g,showSelectAll:i.value.showSelectAll};return Ye(fl,w),w}function Ea(){const a=je(fl);if(!a)throw new Error("Missing selection!");return a}const du=le({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),hl=Symbol.for("vuetify:data-table-sort");function gl(a){const e=Xe(a,"sortBy"),t=ue(a,"mustSort"),n=ue(a,"multiSort");return{sortBy:e,mustSort:t,multiSort:n}}function vl(a){const{sortBy:e,mustSort:t,multiSort:n,page:r}=a,l=s=>{let c=e.value.map(p=>({...p}))??[];const u=c.find(p=>p.key===s.key);u?u.order==="desc"?t.value?u.order="asc":c=c.filter(p=>p.key!==s.key):u.order="desc":n.value?c=[...c,{key:s.key,order:"asc"}]:c=[{key:s.key,order:"asc"}],e.value=c,r&&(r.value=1)};function o(s){return!!e.value.find(c=>c.key===s.key)}const i={sortBy:e,toggleSort:l,isSorted:o};return Ye(hl,i),i}function pu(){const a=je(hl);if(!a)throw new Error("Missing sort!");return a}function fu(a,e,t){const n=Sn();return{sortedItems:x(()=>t.value.length?mu(e.value,t.value,n.current.value,a.customKeySort):e.value)}}function mu(a,e,t,n){const r=new Intl.Collator(t,{sensitivity:"accent",usage:"sort"});return[...a].sort((l,o)=>{for(let i=0;i<e.length;i++){const s=e[i].key,c=e[i].order??"asc";if(c===!1)continue;let u=tn(l.raw,s),p=tn(o.raw,s);if(c==="desc"&&([u,p]=[p,u]),n!=null&&n[s]){const m=n[s](u,p);if(!m)continue;return m}if(u instanceof Date&&p instanceof Date)return u.getTime()-p.getTime();if([u,p]=[u,p].map(m=>m!=null?m.toString().toLocaleLowerCase():m),u!==p)return qt(u)&&qt(p)?0:qt(u)?-1:qt(p)?1:!isNaN(u)&&!isNaN(p)?Number(u)-Number(p):r.compare(u,p)}return 0})}const yl=le({color:String,sticky:Boolean,multiSort:Boolean,sortAscIcon:{type:Ot,default:"$sortAsc"},sortDescIcon:{type:Ot,default:"$sortDesc"},...Wr()},"VDataTableHeaders"),ua=Se()({name:"VDataTableHeaders",props:yl(),setup(a,e){let{slots:t,emit:n}=e;const{toggleSort:r,sortBy:l,isSorted:o}=pu(),{someSelected:i,allSelected:s,selectAll:c,showSelectAll:u}=Ea(),{columns:p,headers:m}=Pa(),{loaderClasses:h}=Hr(a),g=(k,O)=>{if(!(!a.sticky&&!k.fixed))return{position:"sticky",zIndex:k.fixed?4:a.sticky?3:void 0,left:k.fixed?Ze(k.fixedOffset):void 0,top:a.sticky?`calc(var(--v-table-header-height) * ${O})`:void 0}};function w(k){const O=l.value.find(C=>C.key===k.key);return O?O.order==="asc"?a.sortAscIcon:a.sortDescIcon:a.sortAscIcon}const{backgroundColorClasses:b,backgroundColorStyles:f}=Ya(a,"color"),_=x(()=>({headers:m.value,columns:p.value,toggleSort:r,isSorted:o,sortBy:l.value,someSelected:i.value,allSelected:s.value,selectAll:c,getSortIcon:w,getFixedStyles:g})),T=k=>{let{column:O,x:C,y:L}=k;const z=O.key==="data-table-select"||O.key==="data-table-expand";return d(En,{tag:"th",align:O.align,class:["v-data-table__th",{"v-data-table__th--sortable":O.sortable,"v-data-table__th--sorted":o(O)},h.value],style:{width:Ze(O.width),minWidth:Ze(O.width),...g(O,L)},colspan:O.colspan,rowspan:O.rowspan,onClick:O.sortable?()=>r(O):void 0,lastFixed:O.lastFixed,noPadding:z},{default:()=>{var W;const U=`column.${O.key}`,I={column:O,selectAll:c,isSorted:o,toggleSort:r,sortBy:l.value,someSelected:i.value,allSelected:s.value,getSortIcon:w};return t[U]?t[U](I):O.key==="data-table-select"?((W=t["column.data-table-select"])==null?void 0:W.call(t,I))??(u&&d(Ta,{modelValue:s.value,indeterminate:i.value&&!s.value,"onUpdate:modelValue":c},null)):d("div",{class:"v-data-table-header__content"},[d("span",null,[O.title]),O.sortable&&d(ne,{key:"icon",class:"v-data-table-header__sort-icon",icon:w(O)},null),a.multiSort&&o(O)&&d("div",{key:"badge",class:["v-data-table-header__sort-badge",...b.value],style:f.value},[l.value.findIndex(K=>K.key===O.key)+1])])}})};Ee(()=>d(te,null,[t.headers?t.headers(_.value):m.value.map((k,O)=>d("tr",null,[k.map((C,L)=>d(T,{column:C,x:L,y:O},null))])),a.loading&&d("tr",{class:"v-data-table-progress"},[d("th",{colspan:p.value.length},[d(Qr,{name:"v-data-table-progress",active:!0,color:typeof a.loading=="boolean"?void 0:a.loading,indeterminate:!0},{default:t.loader})])])]))}}),hu=le({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),bl=Symbol.for("vuetify:data-table-group");function _l(a){return{groupBy:Xe(a,"groupBy")}}function Sl(a){const{groupBy:e,sortBy:t}=a,n=G(new Set),r=x(()=>e.value.map(c=>({...c,order:c.order??!1})).concat(t.value));function l(c){return n.value.has(c.id)}function o(c){const u=new Set(n.value);l(c)?u.delete(c.id):u.add(c.id),n.value=u}function i(c){function u(p){const m=[];for(const h of p.items)"type"in h&&h.type==="group"?m.push(...u(h)):m.push(h);return m}return u({type:"group",items:c,id:"dummy",key:"dummy",value:"dummy",depth:0})}const s={sortByWithGroups:r,toggleGroup:o,opened:n,groupBy:e,extractRows:i,isGroupOpen:l};return Ye(bl,s),s}function Ol(){const a=je(bl);if(!a)throw new Error("Missing group!");return a}function gu(a,e){if(!a.length)return[];const t=new Map;for(const n of a){const r=tn(n.raw,e);t.has(r)||t.set(r,[]),t.get(r).push(n)}return t}function wl(a,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!e.length)return[];const r=gu(a,e[0]),l=[],o=e.slice(1);return r.forEach((i,s)=>{const c=e[0],u=`${n}_${c}_${s}`;l.push({depth:t,id:u,key:c,value:s,items:o.length?wl(i,o,t+1,u):i,type:"group"})}),l}function Tl(a,e){const t=[];for(const n of a)"type"in n&&n.type==="group"?(n.value!=null&&t.push(n),(e.has(n.id)||n.value==null)&&t.push(...Tl(n.items,e))):t.push(n);return t}function kl(a,e,t){return{flatItems:x(()=>{if(!e.value.length)return a.value;const r=wl(a.value,e.value.map(l=>l.key));return Tl(r,t.value)})}}const vu=le({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),yu=Se()({name:"VDataTableGroupHeaderRow",props:vu(),setup(a,e){let{slots:t}=e;const{isGroupOpen:n,toggleGroup:r,extractRows:l}=Ol(),{isSelected:o,isSomeSelected:i,select:s}=Ea(),{columns:c}=Pa(),u=x(()=>l([a.item]));return()=>d("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":a.item.depth}},[c.value.map(p=>{var m,h;if(p.key==="data-table-group"){const g=n(a.item)?"$expand":"$next",w=()=>r(a.item);return((m=t["data-table-group"])==null?void 0:m.call(t,{item:a.item,count:u.value.length,props:{icon:g,onClick:w}}))??d(En,{class:"v-data-table-group-header-row__column"},{default:()=>[d(ie,{size:"small",variant:"text",icon:g,onClick:w},null),d("span",null,[a.item.value]),d("span",null,[D("("),u.value.length,D(")")])]})}if(p.key==="data-table-select"){const g=o(u.value),w=i(u.value)&&!g,b=f=>s(u.value,f);return((h=t["data-table-select"])==null?void 0:h.call(t,{props:{modelValue:g,indeterminate:w,"onUpdate:modelValue":b}}))??d("td",null,[d(Ta,{modelValue:g,indeterminate:w,"onUpdate:modelValue":b},null)])}return d("td",null,null)})])}}),bu=le({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),Pl=Symbol.for("vuetify:datatable:expanded");function El(a){const e=ue(a,"expandOnClick"),t=Xe(a,"expanded",a.expanded,i=>new Set(i),i=>[...i.values()]);function n(i,s){const c=new Set(t.value);s?c.add(i.value):c.delete(i.value),t.value=c}function r(i){return t.value.has(i.value)}function l(i){n(i,!r(i))}const o={expand:n,expanded:t,expandOnClick:e,isExpanded:r,toggleExpand:l};return Ye(Pl,o),o}function Cl(){const a=je(Pl);if(!a)throw new Error("foo");return a}const _u=le({index:Number,item:Object,onClick:Function},"VDataTableRow"),Su=si({name:"VDataTableRow",props:_u(),setup(a,e){let{slots:t}=e;const{isSelected:n,toggleSelect:r}=Ea(),{isExpanded:l,toggleExpand:o}=Cl(),{columns:i}=Pa();Ee(()=>d("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!a.onClick}],onClick:a.onClick},[a.item&&i.value.map((s,c)=>d(En,{align:s.align,fixed:s.fixed,fixedOffset:s.fixedOffset,lastFixed:s.lastFixed,noPadding:s.key==="data-table-select"||s.key==="data-table-expand",width:s.width},{default:()=>{var h,g;const u=a.item,p=`item.${s.key}`,m={index:a.index,item:a.item,columns:i.value,isSelected:n,toggleSelect:r,isExpanded:l,toggleExpand:o};return t[p]?t[p](m):s.key==="data-table-select"?((h=t["item.data-table-select"])==null?void 0:h.call(t,m))??d(Ta,{disabled:!u.selectable,modelValue:n([u]),onClick:Je(()=>r(u),["stop"])},null):s.key==="data-table-expand"?((g=t["item.data-table-expand"])==null?void 0:g.call(t,m))??d(ie,{icon:l(u)?"$collapse":"$expand",size:"small",variant:"text",onClick:Je(()=>o(u),["stop"])},null):yt(u.columns,s.key)}}))]))}}),Al=le({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowHeight:Number,"onClick:row":Function},"VDataTableRows"),ca=Se()({name:"VDataTableRows",props:Al(),setup(a,e){let{emit:t,slots:n}=e;const{columns:r}=Pa(),{expandOnClick:l,toggleExpand:o,isExpanded:i}=Cl(),{isSelected:s,toggleSelect:c}=Ea(),{toggleGroup:u,isGroupOpen:p}=Ol(),{t:m}=Sn();return Ee(()=>{var h;return a.loading&&n.loading?d("tr",{class:"v-data-table-rows-loading",key:"loading"},[d("td",{colspan:r.value.length},[n.loading()])]):!a.loading&&!a.items.length&&!a.hideNoData?d("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[d("td",{colspan:r.value.length},[((h=n["no-data"])==null?void 0:h.call(n))??m(a.noDataText)])]):d(te,null,[a.items.map((g,w)=>{var _;if(g.type==="group")return n["group-header"]?n["group-header"]({index:w,item:g,columns:r.value,isExpanded:i,toggleExpand:o,isSelected:s,toggleSelect:c,toggleGroup:u,isGroupOpen:p}):d(yu,{key:`group-header_${g.id}`,item:g},n);const b={index:w,item:g,columns:r.value,isExpanded:i,toggleExpand:o,isSelected:s,toggleSelect:c},f={...b,props:{key:`item_${g.key??g.index}`,onClick:l.value||a["onClick:row"]?T=>{var k;l.value&&o(g),(k=a["onClick:row"])==null||k.call(a,T,{item:g})}:void 0,index:w,item:g}};return d(te,null,[n.item?n.item(f):d(Su,f.props,n),i(g)&&((_=n["expanded-row"])==null?void 0:_.call(n,b))])})])}),{}}});const xl=le({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...at(),...vn(),...Nt(),...mn()},"VTable"),da=Se()({name:"VTable",props:xl(),setup(a,e){let{slots:t}=e;const{themeClasses:n}=hn(a),{densityClasses:r}=zr(a);return Ee(()=>d(a.tag,{class:["v-table",{"v-table--fixed-height":!!a.height,"v-table--fixed-header":a.fixedHeader,"v-table--fixed-footer":a.fixedFooter,"v-table--has-top":!!t.top,"v-table--has-bottom":!!t.bottom,"v-table--hover":a.hover},n.value,r.value,a.class],style:a.style},{default:()=>{var l,o,i;return[(l=t.top)==null?void 0:l.call(t),t.default?d("div",{class:"v-table__wrapper",style:{height:Ze(a.height)}},[d("table",null,[t.default()])]):(o=t.wrapper)==null?void 0:o.call(t),(i=t.bottom)==null?void 0:i.call(t)]}})),{}}}),Ou=le({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataTable-items");function wu(a,e,t,n){const r=a.returnObject?e:yt(e,a.itemValue),l=yt(e,a.itemSelectable,!0),o=n.reduce((i,s)=>(i[s.key]=yt(e,s.value??s.key),i),{});return{type:"item",key:a.returnObject?yt(e,a.itemValue):r,index:t,value:r,selectable:l,columns:o,raw:e}}function Tu(a,e,t){return e.map((n,r)=>wu(a,n,r,t))}function Dl(a,e){return{items:x(()=>Tu(a,a.items,e.value))}}function Ll(a){let{page:e,itemsPerPage:t,sortBy:n,groupBy:r,search:l}=a;const o=ui("VDataTable"),i=x(()=>({page:e.value,itemsPerPage:t.value,sortBy:n.value,groupBy:r.value,search:l.value}));he(()=>l==null?void 0:l.value,()=>{e.value=1});let s=null;he(i,()=>{ci(s,i.value)||(o.emit("update:options",i.value),s=i.value)},{deep:!0,immediate:!0})}const ku=(a,e,t)=>a==null||e==null?-1:a.toString().toLocaleLowerCase().indexOf(e.toString().toLocaleLowerCase()),Pu=le({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Eu(a,e,t){var i;const n=[],r=(t==null?void 0:t.default)??ku,l=t!=null&&t.filterKeys?en(t.filterKeys):!1,o=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(a!=null&&a.length))return n;e:for(let s=0;s<a.length;s++){const c=a[s],u={},p={};let m=-1;if(e&&!(t!=null&&t.noFilter)){if(typeof c=="object"){const w=l||Object.keys(c);for(const b of w){const f=yt(c,b,c),_=(i=t==null?void 0:t.customKeyFilter)==null?void 0:i[b];if(m=_?_(f,e,c):r(f,e,c),m!==-1&&m!==!1)_?u[b]=m:p[b]=m;else if((t==null?void 0:t.filterMode)==="every")continue e}}else m=r(c,e,c),m!==-1&&m!==!1&&(p.title=m);const h=Object.keys(p).length,g=Object.keys(u).length;if(!h&&!g||(t==null?void 0:t.filterMode)==="union"&&g!==o&&!h||(t==null?void 0:t.filterMode)==="intersection"&&(g!==o||!h))continue}n.push({index:s,matches:{...p,...u}})}return n}function Cu(a,e,t,n){const r=G([]),l=G(new Map),o=x(()=>n!=null&&n.transform?V(e).map(n==null?void 0:n.transform):V(e));ga(()=>{const s=typeof t=="function"?t():V(t),c=typeof s!="string"&&typeof s!="number"?"":String(s),u=Eu(o.value,c,{customKeyFilter:a.customKeyFilter,default:a.customFilter,filterKeys:a.filterKeys,filterMode:a.filterMode,noFilter:a.noFilter}),p=V(e),m=[],h=new Map;u.forEach(g=>{let{index:w,matches:b}=g;const f=p[w];m.push(f),h.set(f.value,b)}),r.value=m,l.value=h});function i(s){return l.value.get(s.value)}return{filteredItems:r,filteredMatches:l,getMatches:i}}const Il=le({...Al(),width:[String,Number],search:String,...bu(),...hu(),...su(),...Ou(),...cu(),...du(),...yl(),...xl()},"DataTable"),Au=le({...ll(),...Il(),...Pu(),...Pn()},"VDataTable");Se()({name:"VDataTable",props:Au(),emits:{"update:modelValue":a=>!0,"update:page":a=>!0,"update:itemsPerPage":a=>!0,"update:sortBy":a=>!0,"update:options":a=>!0,"update:groupBy":a=>!0,"update:expanded":a=>!0},setup(a,e){let{emit:t,slots:n}=e;const{groupBy:r}=_l(a),{sortBy:l,multiSort:o,mustSort:i}=gl(a),{page:s,itemsPerPage:c}=il(a),{columns:u,headers:p}=cl(a,{groupBy:r,showSelect:ue(a,"showSelect"),showExpand:ue(a,"showExpand")}),{items:m}=Dl(a,u),h=ue(a,"search"),{filteredItems:g}=Cu(a,m,h,{transform:H=>H.columns}),{toggleSort:w}=vl({sortBy:l,multiSort:o,mustSort:i,page:s}),{sortByWithGroups:b,opened:f,extractRows:_,isGroupOpen:T,toggleGroup:k}=Sl({groupBy:r,sortBy:l}),{sortedItems:O}=fu(a,g,b),{flatItems:C}=kl(O,r,f),L=x(()=>C.value.length),{startIndex:z,stopIndex:U,pageCount:I,setItemsPerPage:W}=sl({page:s,itemsPerPage:c,itemsLength:L}),{paginatedItems:K}=iu({items:C,startIndex:z,stopIndex:U,itemsPerPage:c}),J=x(()=>_(K.value)),{isSelected:ge,select:ae,selectAll:ce,toggleSelect:Ce,someSelected:de,allSelected:A}=ml(a,{allItems:m,currentPage:J}),{isExpanded:R,toggleExpand:N}=El(a);Ll({page:s,itemsPerPage:c,sortBy:l,groupBy:r,search:h}),va({VDataTableRows:{hideNoData:ue(a,"hideNoData"),noDataText:ue(a,"noDataText"),loading:ue(a,"loading"),loadingText:ue(a,"loadingText")}});const Y=x(()=>({page:s.value,itemsPerPage:c.value,sortBy:l.value,pageCount:I.value,toggleSort:w,setItemsPerPage:W,someSelected:de.value,allSelected:A.value,isSelected:ge,select:ae,selectAll:ce,toggleSelect:Ce,isExpanded:R,toggleExpand:N,isGroupOpen:T,toggleGroup:k,items:J.value,groupedItems:K.value,columns:u.value,headers:p.value}));return Ee(()=>{const[H]=sa.filterProps(a),[Me]=ua.filterProps(a),[kt]=ca.filterProps(a),[Gt]=da.filterProps(a);return d(da,pe({class:["v-data-table",{"v-data-table--show-select":a.showSelect,"v-data-table--loading":a.loading},a.class],style:a.style},Gt),{top:()=>{var ze;return(ze=n.top)==null?void 0:ze.call(n,Y.value)},default:()=>{var ze,Pt,Et,He;return n.default?n.default(Y.value):d(te,null,[(ze=n.colgroup)==null?void 0:ze.call(n,Y.value),d("thead",null,[d(ua,Me,n)]),(Pt=n.thead)==null?void 0:Pt.call(n,Y.value),d("tbody",null,[n.body?n.body(Y.value):d(ca,pe(kt,{items:K.value}),n)]),(Et=n.tbody)==null?void 0:Et.call(n,Y.value),(He=n.tfoot)==null?void 0:He.call(n,Y.value)])},bottom:()=>n.bottom?n.bottom(Y.value):d(te,null,[d(sa,H,{prepend:n["footer.prepend"]})])})}),{}}});const xu=le({itemsLength:{type:[Number,String],required:!0},...ll(),...Il(),...Pn()},"VDataTableServer"),Du=Se()({name:"VDataTableServer",props:xu(),emits:{"update:modelValue":a=>!0,"update:page":a=>!0,"update:itemsPerPage":a=>!0,"update:sortBy":a=>!0,"update:options":a=>!0,"update:expanded":a=>!0,"update:groupBy":a=>!0,"click:row":(a,e)=>!0},setup(a,e){let{emit:t,slots:n}=e;const{groupBy:r}=_l(a),{sortBy:l,multiSort:o,mustSort:i}=gl(a),{page:s,itemsPerPage:c}=il(a),u=x(()=>parseInt(a.itemsLength,10)),{columns:p,headers:m}=cl(a,{groupBy:r,showSelect:ue(a,"showSelect"),showExpand:ue(a,"showExpand")}),{items:h}=Dl(a,p),{toggleSort:g}=vl({sortBy:l,multiSort:o,mustSort:i,page:s}),{opened:w,isGroupOpen:b,toggleGroup:f,extractRows:_}=Sl({groupBy:r,sortBy:l}),{pageCount:T,setItemsPerPage:k}=sl({page:s,itemsPerPage:c,itemsLength:u}),{flatItems:O}=kl(h,r,w),{isSelected:C,select:L,selectAll:z,toggleSelect:U,someSelected:I,allSelected:W}=ml(a,{allItems:h,currentPage:h}),{isExpanded:K,toggleExpand:J}=El(a),ge=x(()=>_(h.value));Ll({page:s,itemsPerPage:c,sortBy:l,groupBy:r,search:ue(a,"search")}),Ye("v-data-table",{toggleSort:g,sortBy:l}),va({VDataTableRows:{hideNoData:ue(a,"hideNoData"),noDataText:ue(a,"noDataText"),loading:ue(a,"loading"),loadingText:ue(a,"loadingText")}});const ae=x(()=>({page:s.value,itemsPerPage:c.value,sortBy:l.value,pageCount:T.value,toggleSort:g,setItemsPerPage:k,someSelected:I.value,allSelected:W.value,isSelected:C,select:L,selectAll:z,toggleSelect:U,isExpanded:K,toggleExpand:J,isGroupOpen:b,toggleGroup:f,items:ge.value,groupedItems:O.value,columns:p.value,headers:m.value}));Ee(()=>{const[ce]=sa.filterProps(a),[Ce]=ua.filterProps(a),[de]=ca.filterProps(a),[A]=da.filterProps(a);return d(da,pe({class:["v-data-table",{"v-data-table--loading":a.loading},a.class],style:a.style},A),{top:()=>{var R;return(R=n.top)==null?void 0:R.call(n,ae.value)},default:()=>{var R,N,Y,H;return n.default?n.default(ae.value):d(te,null,[(R=n.colgroup)==null?void 0:R.call(n,ae.value),d("thead",{class:"v-data-table__thead",role:"rowgroup"},[d(ua,pe(Ce,{sticky:a.fixedHeader}),n)]),(N=n.thead)==null?void 0:N.call(n,ae.value),d("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[n.body?n.body(ae.value):d(ca,pe(de,{items:O.value}),n)]),(Y=n.tbody)==null?void 0:Y.call(n,ae.value),(H=n.tfoot)==null?void 0:H.call(n,ae.value)])},bottom:()=>n.bottom?n.bottom(ae.value):d(sa,ce,{prepend:n["footer.prepend"]})})})}}),Lu={class:"value-renderer__body"},Iu=q({__name:"LabEditorDataGridGridCellDetailValueRenderer",props:{actions:{default:()=>[]},fillSpace:{type:Boolean,default:!0}},emits:["click:action"],setup(a,{emit:e}){return(t,n)=>(S(),P(lr,{class:Sa(["value-renderer",{"value-renderer--fill-space":t.fillSpace},{"value-renderer--with-actions":t.actions&&t.actions.length>0}]),elevation:"0"},{default:y(()=>[M("div",Lu,[Ue(t.$slots,"default",{},void 0,!0)]),t.actions?(S(),P(Yr,{key:0,vertical:""})):ee("",!0),t.actions?(S(),P(lr,{key:1,class:"value-renderer__actions",elevation:"0"},{default:y(()=>[(S(!0),X(te,null,ke(t.actions,r=>(S(),P(ie,{key:r.value,icon:"",variant:"flat",onClick:l=>e("click:action",r.value)},{default:y(()=>[d(ne,null,{default:y(()=>[D(j(r.props.prependIcon),1)]),_:2},1024),d(fe,{activator:"parent"},{default:y(()=>[D(j(r.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):ee("",!0)]),_:3},8,["class"]))}});const Cn=se(Iu,[["__scopeId","data-v-560ea1bc"]]),Vu={class:"markdown-renderer"},$u=q({__name:"LabEditorDataGridGridCellDetailMarkdownRenderer",props:{value:{},dataType:{},fillSpace:{type:Boolean,default:!0}},setup(a){const e=a,t=Be(),n=/\s+/,r=new Intl.DateTimeFormat([],{dateStyle:"full",timeStyle:"long"}),l=new Intl.DateTimeFormat([],{dateStyle:"full",timeStyle:"medium"}),o=new Intl.DateTimeFormat([],{dateStyle:"full"}),i=new Intl.DateTimeFormat([],{timeStyle:"medium"}),s=G(!0),c=x(()=>[{title:"Copy",value:"copy",props:{prependIcon:"mdi-content-copy"}},{title:s.value?"Display raw value":"Pretty print value",value:"pretty-print",props:{prependIcon:s.value?"mdi-raw":"mdi-auto-fix"}}]),u=x(()=>{if(!s.value||!e.dataType)return e.value.toString();switch(e.dataType){case Z.String:{const g=e.value.trim();return g.startsWith("{")||g.startsWith("[")?"```json\r\n"+g+"\r\n```":g.startsWith("<")?"```xml\r\n"+g+"\r\n```":n.test(g)?g:"`"+g+"`"}case Z.Byte:case Z.Short:case Z.Integer:case Z.Long:case Z.Boolean:case Z.Character:case Z.BigDecimal:case Z.UUID:return"`"+e.value.toString()+"`";case Z.OffsetDateTime:return"📅 `"+r.format(new Date(e.value.toString()))+"`";case Z.LocalDateTime:return"📅 `"+l.format(new Date(e.value.toString()))+"`";case Z.LocalDate:return"📅 `"+o.format(new Date(e.value.toString()))+"`";case Z.LocalTime:return"📅 `"+i.format(new Date("1970-01-01"+e.value.toString()))+"`";case Z.DateTimeRange:return p(e.value,"📅 ",g=>r.format(new Date(g)));case Z.ByteNumberRange:case Z.ShortNumberRange:case Z.IntegerNumberRange:return p(e.value,"",g=>g.toString());case Z.BigDecimalNumberRange:case Z.LongNumberRange:return p(e.value,"",g=>g);case Z.Locale:return"🌐 `"+e.value.toString()+"`";case Z.Currency:return"💰 `"+e.value.toString()+"`";case Z.Predecessor:return"↻ `"+e.value.toString()+"`";case Z.ComplexDataObject:return"```json\r\n"+JSON.stringify(e.value,null,2)+"\r\n```";default:return e.value.toString()}});function p(g,w,b){if(!(e.value instanceof Array)||e.value.length!==2)throw new tt(void 0,"Invalid DateTimeRange value.");const f=e.value,_=f[0],T=f[1],k=O=>O==null?"∞":b(O);return w+"`"+k(_)+"` - `"+k(T)+"`"}function m(g){switch(g){case"copy":h();break;case"pretty-print":s.value=!s.value;break}}function h(){navigator.clipboard.writeText(u.value).then(()=>{t.info("Copied to clipboard.")}).catch(()=>{t.error(new tt(void 0,"Failed to copy to clipboard."))})}return(g,w)=>(S(),P(Cn,{"fill-space":g.fillSpace,actions:c.value,"onClick:action":m},{default:y(()=>[M("div",Vu,[d(_n,{source:u.value},null,8,["source"])])]),_:1},8,["fill-space","actions"]))}});const Vl=se($u,[["__scopeId","data-v-346a4685"]]),rn=1,Ru=2,Nu=3,Bu=4,Mu=5,Gu=35,Uu=36,Fu=37,Wu=11,zu=13;function Hu(a){return a==45||a==46||a==58||a>=65&&a<=90||a==95||a>=97&&a<=122||a>=161}function qu(a){return a==9||a==10||a==13||a==32}let pr=null,fr=null,mr=0;function ln(a,e){let t=a.pos+e;if(fr==a&&mr==t)return pr;for(;qu(a.peek(e));)e++;let n="";for(;;){let r=a.peek(e);if(!Hu(r))break;n+=String.fromCharCode(r),e++}return fr=a,mr=t,pr=n||null}function hr(a,e){this.name=a,this.parent=e,this.hash=e?e.hash:0;for(let t=0;t<a.length;t++)this.hash+=(this.hash<<4)+a.charCodeAt(t)+(a.charCodeAt(t)<<8)}const Qu=new di({start:null,shift(a,e,t,n){return e==rn?new hr(ln(n,1)||"",a):a},reduce(a,e){return e==Wu&&a?a.parent:a},reuse(a,e,t,n){let r=e.type.id;return r==rn||r==zu?new hr(ln(n,1)||"",a):a},hash(a){return a?a.hash:0},strict:!1}),Xu=new Kr((a,e)=>{if(a.next==60){if(a.advance(),a.next==47){a.advance();let t=ln(a,0);if(!t)return a.acceptToken(Mu);if(e.context&&t==e.context.name)return a.acceptToken(Ru);for(let n=e.context;n;n=n.parent)if(n.name==t)return a.acceptToken(Nu,-2);a.acceptToken(Bu)}else if(a.next!=33&&a.next!=63)return a.acceptToken(rn)}},{contextual:!0});function An(a,e){return new Kr(t=>{for(let n=0,r=0;;r++){if(t.next<0){r&&t.acceptToken(a);break}if(t.next==e.charCodeAt(n)){if(n++,n==e.length){r>=e.length&&t.acceptToken(a,1-e.length);break}}else n=t.next==e.charCodeAt(0)?1:0;t.advance()}})}const ju=An(Gu,"-->"),Yu=An(Uu,"?>"),Ku=An(Fu,"]]>"),Zu=Zr({Text:Oe.content,"StartTag StartCloseTag EndTag SelfCloseEndTag":Oe.angleBracket,TagName:Oe.tagName,"MismatchedCloseTag/Tagname":[Oe.tagName,Oe.invalid],AttributeName:Oe.attributeName,AttributeValue:Oe.attributeValue,Is:Oe.definitionOperator,"EntityReference CharacterReference":Oe.character,Comment:Oe.blockComment,ProcessingInst:Oe.processingInstruction,DoctypeDecl:Oe.documentMeta,Cdata:Oe.special(Oe.string)}),Ju=pi.deserialize({version:14,states:",SOQOaOOOrOxO'#CfOzOpO'#CiO!tOaO'#CgOOOP'#Cg'#CgO!{OrO'#CrO#TOtO'#CsO#]OpO'#CtOOOP'#DS'#DSOOOP'#Cv'#CvQQOaOOOOOW'#Cw'#CwO#eOxO,59QOOOP,59Q,59QOOOO'#Cx'#CxO#mOpO,59TO#uO!bO,59TOOOP'#C{'#C{O$TOaO,59RO$[OpO'#CoOOOP,59R,59ROOOQ'#C|'#C|O$dOrO,59^OOOP,59^,59^OOOS'#C}'#C}O$lOtO,59_OOOP,59_,59_O$tOpO,59`O$|OpO,59`OOOP-E6t-E6tOOOW-E6u-E6uOOOP1G.l1G.lOOOO-E6v-E6vO%UO!bO1G.oO%UO!bO1G.oO%dOpO'#CkO%lO!bO'#CyO%zO!bO1G.oOOOP1G.o1G.oOOOP1G.w1G.wOOOP-E6y-E6yOOOP1G.m1G.mO&VOpO,59ZO&_OpO,59ZOOOQ-E6z-E6zOOOP1G.x1G.xOOOS-E6{-E6{OOOP1G.y1G.yO&gOpO1G.zO&gOpO1G.zOOOP1G.z1G.zO&oO!bO7+$ZO&}O!bO7+$ZOOOP7+$Z7+$ZOOOP7+$c7+$cO'YOpO,59VO'bOpO,59VO'jO!bO,59eOOOO-E6w-E6wO'xOpO1G.uO'xOpO1G.uOOOP1G.u1G.uO(QOpO7+$fOOOP7+$f7+$fO(YO!bO<<GuOOOP<<Gu<<GuOOOP<<G}<<G}O'bOpO1G.qO'bOpO1G.qO(eO#tO'#CnOOOO1G.q1G.qO(sOpO7+$aOOOP7+$a7+$aOOOP<<HQ<<HQOOOPAN=aAN=aOOOPAN=iAN=iO'bOpO7+$]OOOO7+$]7+$]OOOO'#Cz'#CzO({O#tO,59YOOOO,59Y,59YOOOP<<G{<<G{OOOO<<Gw<<GwOOOO-E6x-E6xOOOO1G.t1G.t",stateData:")Z~OPQOSVOTWOVWOWWOXWOiXOxPO}TO!PUO~OuZOw]O~O^`Oy^O~OPQOQcOSVOTWOVWOWWOXWOxPO}TO!PUO~ORdO~P!SOseO|gO~OthO!OjO~O^lOy^O~OuZOwoO~O^qOy^O~O[vO`sOdwOy^O~ORyO~P!SO^{Oy^O~OseO|}O~OthO!O!PO~O^!QOy^O~O[!SOy^O~O[!VO`sOd!WOy^O~Oa!YOy^O~Oy^O[mX`mXdmX~O[!VO`sOd!WO~O^!]Oy^O~O[!_Oy^O~O[!aOy^O~O[!cO`sOd!dOy^O~O[!cO`sOd!dO~Oa!eOy^O~Oy^Oz!gO~Oy^O[ma`madma~O[!jOy^O~O[!kOy^O~O[!lO`sOd!mO~OW!pOX!pOz!rO{!pO~O[!sOy^O~OW!pOX!pOz!vO{!pO~O",goto:"%[wPPPPPPPPPPxxP!OP!UPP!_!iP!oxxxP!u!{#R$Z$j$p$v$|PPPP%SXWORYbXRORYb_t`qru!T!U!bQ!h!YS!o!e!fR!t!nQdRRybXSORYbQYORmYQ[PRn[Q_QQkVjp_krz!R!T!X!Z!^!`!f!i!nQr`QzcQ!RlQ!TqQ!XsQ!ZtQ!^{Q!`!QQ!f!YQ!i!]R!n!eQu`S!UqrU![u!U!bR!b!TQ!q!gR!u!qQbRRxbQfTR|fQiUR!OiSXOYTaRb",nodeNames:"⚠ StartTag StartCloseTag MissingCloseTag StartCloseTag StartCloseTag Document Text EntityReference CharacterReference Cdata Element EndTag OpenTag TagName Attribute AttributeName Is AttributeValue CloseTag SelfCloseEndTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag DoctypeDecl",maxTerm:47,context:Qu,nodeProps:[["closedBy",1,"SelfCloseEndTag EndTag",13,"CloseTag MissingCloseTag"],["openedBy",12,"StartTag StartCloseTag",19,"OpenTag",20,"StartTag"]],propSources:[Zu],skippedNodes:[0],repeatNodeCount:8,tokenData:"IX~R!XOX$nXY&kYZ&kZ]$n]^&k^p$npq&kqr$nrs'ssv$nvw(Zw}$n}!O*l!O!P$n!P!Q,{!Q![$n![!].e!]!^$n!^!_1v!_!`Cz!`!aDm!a!bE`!b!c$n!c!}.e!}#P$n#P#QFx#Q#R$n#R#S.e#S#T$n#T#o.e#o%W$n%W%o.e%o%p$n%p&a.e&a&b$n&b1p.e1p4U$n4U4d.e4d4e$n4e$IS.e$IS$I`$n$I`$Ib.e$Ib$Kh$n$Kh%#t.e%#t&/x$n&/x&Et.e&Et&FV$n&FV;'S.e;'S;:j1p;:j;=`&e<%l?&r$n?&r?Ah.e?Ah?BY$n?BY?Mn.e?MnO$nX$uWVP{WOr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$nP%dTVPOv%_w!^%_!_;'S%_;'S;=`%s<%lO%_P%vP;=`<%l%_W&OT{WOr%ysv%yw;'S%y;'S;=`&_<%lO%yW&bP;=`<%l%yX&hP;=`<%l$n_&t_VP{WyUOX$nXY&kYZ&kZ]$n]^&k^p$npq&kqr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$nZ'zTzYVPOv%_w!^%_!_;'S%_;'S;=`%s<%lO%_~(^VOp(sqs(sst)ht!](s!^;'S(s;'S;=`)b<%lO(s~(vVOp(sqs(st!](s!]!^)]!^;'S(s;'S;=`)b<%lO(s~)bOW~~)eP;=`<%l(s~)kTOp)zq!])z!^;'S)z;'S;=`*f<%lO)z~)}UOp)zq!])z!]!^*a!^;'S)z;'S;=`*f<%lO)z~*fOX~~*iP;=`<%l)zZ*sYVP{WOr$nrs%_sv$nw}$n}!O+c!O!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$nZ+jYVP{WOr$nrs%_sv$nw!^$n!^!_%y!_!`$n!`!a,Y!a;'S$n;'S;=`&e<%lO$nZ,cW|QVP{WOr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$n]-SYVP{WOr$nrs%_sv$nw!^$n!^!_%y!_!`$n!`!a-r!a;'S$n;'S;=`&e<%lO$n]-{WdSVP{WOr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$n_.p!O`S^QVP{WOr$nrs%_sv$nw}$n}!O.e!O!P.e!P!Q$n!Q![.e![!].e!]!^$n!^!_%y!_!c$n!c!}.e!}#R$n#R#S.e#S#T$n#T#o.e#o$}$n$}%O.e%O%W$n%W%o.e%o%p$n%p&a.e&a&b$n&b1p.e1p4U.e4U4d.e4d4e$n4e$IS.e$IS$I`$n$I`$Ib.e$Ib$Je$n$Je$Jg.e$Jg$Kh$n$Kh%#t.e%#t&/x$n&/x&Et.e&Et&FV$n&FV;'S.e;'S;:j1p;:j;=`&e<%l?&r$n?&r?Ah.e?Ah?BY$n?BY?Mn.e?MnO$n_1sP;=`<%l.eX1{W{WOq%yqr2esv%yw!a%y!a!bCd!b;'S%y;'S;=`&_<%lO%yX2j]{WOr%ysv%yw}%y}!O3c!O!f%y!f!g4e!g!}%y!}#O9t#O#W%y#W#X@Q#X;'S%y;'S;=`&_<%lO%yX3hV{WOr%ysv%yw}%y}!O3}!O;'S%y;'S;=`&_<%lO%yX4UT}P{WOr%ysv%yw;'S%y;'S;=`&_<%lO%yX4jV{WOr%ysv%yw!q%y!q!r5P!r;'S%y;'S;=`&_<%lO%yX5UV{WOr%ysv%yw!e%y!e!f5k!f;'S%y;'S;=`&_<%lO%yX5pV{WOr%ysv%yw!v%y!v!w6V!w;'S%y;'S;=`&_<%lO%yX6[V{WOr%ysv%yw!{%y!{!|6q!|;'S%y;'S;=`&_<%lO%yX6vV{WOr%ysv%yw!r%y!r!s7]!s;'S%y;'S;=`&_<%lO%yX7bV{WOr%ysv%yw!g%y!g!h7w!h;'S%y;'S;=`&_<%lO%yX7|X{WOr7wrs8isv7wvw8iw!`7w!`!a9W!a;'S7w;'S;=`9n<%lO7wP8lTO!`8i!`!a8{!a;'S8i;'S;=`9Q<%lO8iP9QOiPP9TP;=`<%l8iX9_TiP{WOr%ysv%yw;'S%y;'S;=`&_<%lO%yX9qP;=`<%l7wX9yX{WOr%ysv%yw!e%y!e!f:f!f#V%y#V#W=t#W;'S%y;'S;=`&_<%lO%yX:kV{WOr%ysv%yw!f%y!f!g;Q!g;'S%y;'S;=`&_<%lO%yX;VV{WOr%ysv%yw!c%y!c!d;l!d;'S%y;'S;=`&_<%lO%yX;qV{WOr%ysv%yw!v%y!v!w<W!w;'S%y;'S;=`&_<%lO%yX<]V{WOr%ysv%yw!c%y!c!d<r!d;'S%y;'S;=`&_<%lO%yX<wV{WOr%ysv%yw!}%y!}#O=^#O;'S%y;'S;=`&_<%lO%yX=eT{WxPOr%ysv%yw;'S%y;'S;=`&_<%lO%yX=yV{WOr%ysv%yw#W%y#W#X>`#X;'S%y;'S;=`&_<%lO%yX>eV{WOr%ysv%yw#T%y#T#U>z#U;'S%y;'S;=`&_<%lO%yX?PV{WOr%ysv%yw#h%y#h#i?f#i;'S%y;'S;=`&_<%lO%yX?kV{WOr%ysv%yw#T%y#T#U<r#U;'S%y;'S;=`&_<%lO%yX@VV{WOr%ysv%yw#c%y#c#d@l#d;'S%y;'S;=`&_<%lO%yX@qV{WOr%ysv%yw#V%y#V#WAW#W;'S%y;'S;=`&_<%lO%yXA]V{WOr%ysv%yw#h%y#h#iAr#i;'S%y;'S;=`&_<%lO%yXAwV{WOr%ysv%yw#m%y#m#nB^#n;'S%y;'S;=`&_<%lO%yXBcV{WOr%ysv%yw#d%y#d#eBx#e;'S%y;'S;=`&_<%lO%yXB}V{WOr%ysv%yw#X%y#X#Y7w#Y;'S%y;'S;=`&_<%lO%yXCkT!PP{WOr%ysv%yw;'S%y;'S;=`&_<%lO%yZDTWaQVP{WOr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$n_DvW[UVP{WOr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$nZEgYVP{WOr$nrs%_sv$nw!^$n!^!_%y!_!`$n!`!aFV!a;'S$n;'S;=`&e<%lO$nZF`W!OQVP{WOr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$nZGPYVP{WOr$nrs%_sv$nw!^$n!^!_%y!_#P$n#P#QGo#Q;'S$n;'S;=`&e<%lO$nZGvYVP{WOr$nrs%_sv$nw!^$n!^!_%y!_!`$n!`!aHf!a;'S$n;'S;=`&e<%lO$nZHoWwQVP{WOr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$n",tokenizers:[Xu,ju,Yu,Ku,0,1,2,3],topRules:{Document:[0,6]},tokenPrec:0}),ec=1024;let tc=0;class Ba{constructor(e,t){this.from=e,this.to=t}}class oe{constructor(e={}){this.id=tc++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ve.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}oe.closedBy=new oe({deserialize:a=>a.split(" ")});oe.openedBy=new oe({deserialize:a=>a.split(" ")});oe.group=new oe({deserialize:a=>a.split(" ")});oe.contextHash=new oe({perNode:!0});oe.lookAhead=new oe({perNode:!0});oe.mounted=new oe({perNode:!0});class pa{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[oe.mounted.id]}}const ac=Object.create(null);class Ve{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):ac,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Ve(e.name||"",t,e.id,n);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(r)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(oe.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return n=>{for(let r=n.prop(oe.group),l=-1;l<(r?r.length:0);l++){let o=t[l<0?n.name:r[l]];if(o)return o}}}}Ve.none=new Ve("",Object.create(null),0,8);const Xt=new WeakMap,gr=new WeakMap;var ve;(function(a){a[a.ExcludeBuffers=1]="ExcludeBuffers",a[a.IncludeAnonymous=2]="IncludeAnonymous",a[a.IgnoreMounts=4]="IgnoreMounts",a[a.IgnoreOverlays=8]="IgnoreOverlays"})(ve||(ve={}));class _e{constructor(e,t,n,r,l){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,l&&l.length){this.props=Object.create(null);for(let[o,i]of l)this.props[typeof o=="number"?o:o.id]=i}}toString(){let e=pa.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let r=n.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new sn(this.topNode,e)}cursorAt(e,t=0,n=0){let r=Xt.get(this)||this.topNode,l=new sn(r);return l.moveTo(e,t),Xt.set(this,l._tree),l}get topNode(){return new Ie(this,0,0,null)}resolve(e,t=0){let n=Rt(Xt.get(this)||this.topNode,e,t,!1);return Xt.set(this,n),n}resolveInner(e,t=0){let n=Rt(gr.get(this)||this.topNode,e,t,!0);return gr.set(this,n),n}resolveStack(e,t=0){return lc(this,e,t)}iterate(e){let{enter:t,leave:n,from:r=0,to:l=this.length}=e,o=e.mode||0,i=(o&ve.IncludeAnonymous)>0;for(let s=this.cursor(o|ve.IncludeAnonymous);;){let c=!1;if(s.from<=l&&s.to>=r&&(!i&&s.type.isAnonymous||t(s)!==!1)){if(s.firstChild())continue;c=!0}for(;c&&n&&(i||!s.type.isAnonymous)&&n(s),!s.nextSibling();){if(!s.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Ln(Ve.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,r)=>new _e(this.type,t,n,r,this.propValues),e.makeTree||((t,n,r)=>new _e(Ve.none,t,n,r)))}static build(e){return oc(e)}}_e.empty=new _e(Ve.none,[],[],0);class xn{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new xn(this.buffer,this.index)}}class ct{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return Ve.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],l=r.name;if(/\W/.test(l)&&!r.isError&&(l=JSON.stringify(l)),e+=4,n==e)return l;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return l+"("+o.join(",")+")"}findChild(e,t,n,r,l){let{buffer:o}=this,i=-1;for(let s=e;s!=t&&!($l(l,r,o[s+1],o[s+2])&&(i=s,n>0));s=o[s+3]);return i}slice(e,t,n){let r=this.buffer,l=new Uint16Array(t-e),o=0;for(let i=e,s=0;i<t;){l[s++]=r[i++],l[s++]=r[i++]-n;let c=l[s++]=r[i++]-n;l[s++]=r[i++]-e,o=Math.max(o,c)}return new ct(l,o,this.set)}}function $l(a,e,t,n){switch(a){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function Rt(a,e,t,n){for(var r;a.from==a.to||(t<1?a.from>=e:a.from>e)||(t>-1?a.to<=e:a.to<e);){let o=!n&&a instanceof Ie&&a.index<0?null:a.parent;if(!o)return a;a=o}let l=n?0:ve.IgnoreOverlays;if(n)for(let o=a,i=o.parent;i;o=i,i=o.parent)o instanceof Ie&&o.index<0&&((r=i.enter(e,t,l))===null||r===void 0?void 0:r.from)!=o.from&&(a=i);for(;;){let o=a.enter(e,t,l);if(!o)return a;a=o}}class Rl{cursor(e=0){return new sn(this,e)}getChild(e,t=null,n=null){let r=vr(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return vr(this,e,t,n)}resolve(e,t=0){return Rt(this,e,t,!1)}resolveInner(e,t=0){return Rt(this,e,t,!0)}matchContext(e){return on(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}get node(){return this}get next(){return this.parent}}class Ie extends Rl{constructor(e,t,n,r){super(),this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,l=0){for(let o=this;;){for(let{children:i,positions:s}=o._tree,c=t>0?i.length:-1;e!=c;e+=t){let u=i[e],p=s[e]+o.from;if($l(r,n,p,p+u.length)){if(u instanceof ct){if(l&ve.ExcludeBuffers)continue;let m=u.findChild(0,u.buffer.length,t,n-p,r);if(m>-1)return new Ke(new nc(o,u,e,p),null,m)}else if(l&ve.IncludeAnonymous||!u.type.isAnonymous||Dn(u)){let m;if(!(l&ve.IgnoreMounts)&&(m=pa.get(u))&&!m.overlay)return new Ie(m.tree,p,e,o);let h=new Ie(u,p,e,o);return l&ve.IncludeAnonymous||!h.type.isAnonymous?h:h.nextChild(t<0?u.children.length-1:0,t,n,r)}}}if(l&ve.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&ve.IgnoreOverlays)&&(r=pa.get(this._tree))&&r.overlay){let l=e-this.from;for(let{from:o,to:i}of r.overlay)if((t>0?o<=l:o<l)&&(t<0?i>=l:i>l))return new Ie(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function vr(a,e,t,n){let r=a.cursor(),l=[];if(!r.firstChild())return l;if(t!=null){for(;!r.type.is(t);)if(!r.nextSibling())return l}for(;;){if(n!=null&&r.type.is(n))return l;if(r.type.is(e)&&l.push(r.node),!r.nextSibling())return n==null?l:[]}}function on(a,e,t=e.length-1){for(let n=a.parent;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class nc{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class Ke extends Rl{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,l=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return l<0?null:new Ke(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&ve.ExcludeBuffers)return null;let{buffer:r}=this.context,l=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new Ke(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ke(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Ke(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,l=n.buffer[this.index+3];if(l>r){let o=n.buffer[this.index+1];e.push(n.slice(r,l,o)),t.push(0)}return new _e(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Nl(a){if(!a.length)return null;if(a.length==1)return a[0];let e=0,t=a[0];for(let l=1;l<a.length;l++){let o=a[l];(o.from>t.from||o.to<t.to)&&(t=o,e=l)}let n=t instanceof Ie&&t.index<0?null:t.parent,r=a.slice();return n?r[e]=n:r.splice(e,1),new rc(r,t)}class rc{constructor(e,t){this.heads=e,this.node=t}get next(){return Nl(this.heads)}}function lc(a,e,t){let n=a.resolveInner(e,t),r=null;for(let l=n instanceof Ie?n:n.context.parent;l;l=l.parent)if(l.index<0){let o=l.parent;(r||(r=[n])).push(o.resolve(e,t)),l=o}else{let o=pa.get(l.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let i=new Ie(o.tree,o.overlay[0].from+l.from,0,null);(r||(r=[n])).push(Rt(i,e,t,!1))}}return r?Nl(r):n}class sn{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ie)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return e?e instanceof Ie?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,l=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&ve.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ve.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ve.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let r=n<0?0:this.stack[n]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(r)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(r.buffer.buffer[l+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let l=t+e,o=e<0?-1:n._tree.children.length;l!=o;l+=e){let i=n._tree.children[l];if(this.mode&ve.IncludeAnonymous||i instanceof ct||!i.type.isAnonymous||Dn(i))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,l=this.stack.length;l>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=l+1;break e}r=this.stack[--l]}for(let r=n;r<this.stack.length;r++)t=new Ke(this.buffer,t,this.stack[r]);return this.bufferNode=new Ke(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return on(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,l=this.stack.length-1;r>=0;l--){if(l<0)return on(this.node,e,r);let o=n[t.buffer[this.stack[l]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function Dn(a){return a.children.some(e=>e instanceof ct||!e.type.isAnonymous||Dn(e))}function oc(a){var e;let{buffer:t,nodeSet:n,maxBufferLength:r=ec,reused:l=[],minRepeatType:o=n.types.length}=a,i=Array.isArray(t)?new xn(t,t.length):t,s=n.types,c=0,u=0;function p(k,O,C,L,z){let{id:U,start:I,end:W,size:K}=i,J=u;for(;K<0;)if(i.next(),K==-1){let de=l[U];C.push(de),L.push(I-k);return}else if(K==-3){c=U;return}else if(K==-4){u=U;return}else throw new RangeError(`Unrecognized record size: ${K}`);let ge=s[U],ae,ce,Ce=I-k;if(W-I<=r&&(ce=w(i.pos-O,z))){let de=new Uint16Array(ce.size-ce.skip),A=i.pos-ce.size,R=de.length;for(;i.pos>A;)R=b(ce.start,de,R);ae=new ct(de,W-ce.start,n),Ce=ce.start-k}else{let de=i.pos-K;i.next();let A=[],R=[],N=U>=o?U:-1,Y=0,H=W;for(;i.pos>de;)N>=0&&i.id==N&&i.size>=0?(i.end<=H-r&&(h(A,R,I,Y,i.end,H,N,J),Y=A.length,H=i.end),i.next()):p(I,de,A,R,N);if(N>=0&&Y>0&&Y<A.length&&h(A,R,I,Y,I,H,N,J),A.reverse(),R.reverse(),N>-1&&Y>0){let Me=m(ge);ae=Ln(ge,A,R,0,A.length,0,W-I,Me,Me)}else ae=g(ge,A,R,W-I,J-W)}C.push(ae),L.push(Ce)}function m(k){return(O,C,L)=>{let z=0,U=O.length-1,I,W;if(U>=0&&(I=O[U])instanceof _e){if(!U&&I.type==k&&I.length==L)return I;(W=I.prop(oe.lookAhead))&&(z=C[U]+I.length+W)}return g(k,O,C,L,z)}}function h(k,O,C,L,z,U,I,W){let K=[],J=[];for(;k.length>L;)K.push(k.pop()),J.push(O.pop()+C-z);k.push(g(n.types[I],K,J,U-z,W-U)),O.push(z-C)}function g(k,O,C,L,z=0,U){if(c){let I=[oe.contextHash,c];U=U?[I].concat(U):[I]}if(z>25){let I=[oe.lookAhead,z];U=U?[I].concat(U):[I]}return new _e(k,O,C,L,U)}function w(k,O){let C=i.fork(),L=0,z=0,U=0,I=C.end-r,W={size:0,start:0,skip:0};e:for(let K=C.pos-k;C.pos>K;){let J=C.size;if(C.id==O&&J>=0){W.size=L,W.start=z,W.skip=U,U+=4,L+=4,C.next();continue}let ge=C.pos-J;if(J<0||ge<K||C.start<I)break;let ae=C.id>=o?4:0,ce=C.start;for(C.next();C.pos>ge;){if(C.size<0)if(C.size==-3)ae+=4;else break e;else C.id>=o&&(ae+=4);C.next()}z=ce,L+=J,U+=ae}return(O<0||L==k)&&(W.size=L,W.start=z,W.skip=U),W.size>4?W:void 0}function b(k,O,C){let{id:L,start:z,end:U,size:I}=i;if(i.next(),I>=0&&L<o){let W=C;if(I>4){let K=i.pos-(I-4);for(;i.pos>K;)C=b(k,O,C)}O[--C]=W,O[--C]=U-k,O[--C]=z-k,O[--C]=L}else I==-3?c=L:I==-4&&(u=L);return C}let f=[],_=[];for(;i.pos>0;)p(a.start||0,a.bufferStart||0,f,_,-1);let T=(e=a.length)!==null&&e!==void 0?e:f.length?_[0]+f[0].length:0;return new _e(s[a.topID],f.reverse(),_.reverse(),T)}const yr=new WeakMap;function ta(a,e){if(!a.isAnonymous||e instanceof ct||e.type!=a)return 1;let t=yr.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=a||!(n instanceof _e)){t=1;break}t+=ta(a,n)}yr.set(e,t)}return t}function Ln(a,e,t,n,r,l,o,i,s){let c=0;for(let g=n;g<r;g++)c+=ta(a,e[g]);let u=Math.ceil(c*1.5/8),p=[],m=[];function h(g,w,b,f,_){for(let T=b;T<f;){let k=T,O=w[T],C=ta(a,g[T]);for(T++;T<f;T++){let L=ta(a,g[T]);if(C+L>=u)break;C+=L}if(T==k+1){if(C>u){let L=g[k];h(L.children,L.positions,0,L.children.length,w[k]+_);continue}p.push(g[k])}else{let L=w[T-1]+g[T-1].length-O;p.push(Ln(a,g,w,k,T,O,L,null,s))}m.push(O+_-l)}}return h(e,t,n,r,0),(i||s)(p,m,o)}class it{constructor(e,t,n,r,l=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(l?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let r=[new it(0,e.length,e,0,!1,n)];for(let l of t)l.to>e.length&&r.push(l);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],l=1,o=e.length?e[0]:null;for(let i=0,s=0,c=0;;i++){let u=i<t.length?t[i]:null,p=u?u.fromA:1e9;if(p-s>=n)for(;o&&o.from<p;){let m=o;if(s>=m.from||p<=m.to||c){let h=Math.max(m.from,s)-c,g=Math.min(m.to,p)-c;m=h>=g?null:new it(h,g,m.tree,m.offset+c,i>0,!!u)}if(m&&r.push(m),o.to>p)break;o=l<e.length?e[l++]:null}if(!u)break;s=u.toA,c=u.toA-u.toB}return r}}class ic{startParse(e,t,n){return typeof e=="string"&&(e=new sc(e)),n=n?n.length?n.map(r=>new Ba(r.from,r.to)):[new Ba(0,0)]:[new Ba(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let l=r.advance();if(l)return l}}}class sc{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new oe({perNode:!0});var Ma;const Vt=new oe;function uc(a){return Jr.define({combine:a?e=>e.concat(a):void 0})}const cc=new oe;class Ge{constructor(e,t,n=[],r=""){this.data=e,this.name=r,Jt.prototype.hasOwnProperty("tree")||Object.defineProperty(Jt.prototype,"tree",{get(){return ma(this)}}),this.parser=t,this.extension=[Tt.of(this),Jt.languageData.of((l,o,i)=>{let s=br(l,o,i),c=s.type.prop(Vt);if(!c)return[];let u=l.facet(c),p=s.type.prop(cc);if(p){let m=s.resolve(o-s.from,i);for(let h of p)if(h.test(m,l)){let g=l.facet(h.facet);return h.type=="replace"?g:g.concat(u)}}return u})].concat(n)}isActiveAt(e,t,n=-1){return br(e,t,n).type.prop(Vt)==this.data}findRegions(e){let t=e.facet(Tt);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(l,o)=>{if(l.prop(Vt)==this.data){n.push({from:o,to:o+l.length});return}let i=l.prop(oe.mounted);if(i){if(i.tree.prop(Vt)==this.data){if(i.overlay)for(let s of i.overlay)n.push({from:s.from+o,to:s.to+o});else n.push({from:o,to:o+l.length});return}else if(i.overlay){let s=n.length;if(r(i.tree,i.overlay[0].from+o),n.length>s)return}}for(let s=0;s<l.children.length;s++){let c=l.children[s];c instanceof _e&&r(c,l.positions[s]+o)}};return r(ma(e),0),n}get allowsNesting(){return!0}}Ge.setState=hi.define();function br(a,e,t){let n=a.facet(Tt),r=ma(a).topNode;if(!n||n.allowsNesting)for(let l=r;l;l=l.enter(e,t,ve.ExcludeBuffers))l.type.isTop&&(r=l);return r}class fa extends Ge{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=uc(e.languageData);return new fa(t,e.parser.configure({props:[Vt.add(n=>n.isTop?t:void 0)]}),e.name)}configure(e,t){return new fa(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ma(a){let e=a.field(Ge.state,!1);return e?e.tree:_e.empty}class dc{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let xt=null;class ha{constructor(e,t,n=[],r,l,o,i,s){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=l,this.viewport=o,this.skipped=i,this.scheduleOn=s,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new ha(e,t,[],_e.empty,0,n,[],null)}startParse(){return this.parser.startParse(new dc(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=_e.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(it.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(it.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=xt;xt=this;try{return e()}finally{xt=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=_r(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:l,viewport:o,skipped:i}=this;if(this.takeTree(),!e.empty){let s=[];if(e.iterChangedRanges((c,u,p,m)=>s.push({fromA:c,toA:u,fromB:p,toB:m})),n=it.applyChanges(n,s),r=_e.empty,l=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){i=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),p=e.mapPos(c.to,-1);u<p&&i.push({from:u,to:p})}}}return new ha(this.parser,t,n,r,l,o,i,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:r,to:l}=this.skipped[n];r<e.to&&l>e.from&&(this.fragments=_r(this.fragments,r,l),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends ic{createParse(t,n,r){let l=r[0].from,o=r[r.length-1].to;return{parsedPos:l,advance(){let s=xt;if(s){for(let c of r)s.tempSkipped.push(c);e&&(s.scheduleOn=s.scheduleOn?Promise.all([s.scheduleOn,e]):e)}return this.parsedPos=o,new _e(Ve.none,[],[],o-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return xt}}function _r(a,e,t){return it.applyChanges(a,[{fromA:e,toA:t,fromB:e,toB:t}])}class wt{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new wt(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=ha.create(e.facet(Tt).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new wt(n)}}Ge.state=fi.define({create:wt.init,update(a,e){for(let t of e.effects)if(t.is(Ge.setState))return t.value;return e.startState.facet(Tt)!=e.state.facet(Tt)?wt.init(e.state):a.apply(e)}});let Bl=a=>{let e=setTimeout(()=>a(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Bl=a=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(a,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Ga=typeof navigator<"u"&&(!((Ma=navigator.scheduling)===null||Ma===void 0)&&Ma.isInputPending)?()=>navigator.scheduling.isInputPending():null,pc=gi.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Ge.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Ge.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Bl(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,l=n.field(Ge.state);if(l.tree==l.context.tree&&l.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Ga?Math.max(25,e.timeRemaining()-5):1e9),i=l.context.treeLen<r&&n.doc.length>r+1e3,s=l.context.work(()=>Ga&&Ga()||Date.now()>o,r+(i?0:1e5));this.chunkBudget-=Date.now()-t,(s||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:Ge.setState.of(new wt(l.context))})),this.chunkBudget>0&&!(s&&!i)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>vi(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Tt=Jr.define({combine(a){return a.length?a[0]:null},enables:a=>[Ge.state,pc,mi.contentAttributes.compute([a],e=>{let t=e.facet(a);return t&&t.name?{"data-language":t.name}:{}})]});class fc{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const mc=new oe,hc=new oe,gc=new oe,vc=Object.create(null),Sr=[Ve.none],Or=[],yc=Object.create(null);for(let[a,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])yc[a]=bc(vc,e);function Ua(a,e){Or.indexOf(a)>-1||(Or.push(a),console.warn(e))}function bc(a,e){let t=null;for(let l of e.split(".")){let o=a[l]||Oe[l];o?typeof o=="function"?t?t=o(t):Ua(l,`Modifier ${l} used at start of tag`):t?Ua(l,`Tag ${l} used as modifier`):t=o:Ua(l,`Unknown highlighting tag ${l}`)}if(!t)return 0;let n=e.replace(/ /g,"_"),r=Ve.define({id:Sr.length,name:n,props:[Zr({[n]:t})]});return Sr.push(r),r.id}function aa(a,e){let t=e&&e.getChild("TagName");return t?a.sliceString(t.from,t.to):""}function Fa(a,e){let t=e&&e.firstChild;return!t||t.name!="OpenTag"?"":aa(a,t)}function _c(a,e,t){let n=e&&e.getChildren("Attribute").find(l=>l.from<=t&&l.to>=t),r=n&&n.getChild("AttributeName");return r?a.sliceString(r.from,r.to):""}function Wa(a){for(let e=a&&a.parent;e;e=e.parent)if(e.name=="Element")return e;return null}function Sc(a,e){var t;let n=ma(a).resolveInner(e,-1),r=null;for(let l=n;!r&&l.parent;l=l.parent)(l.name=="OpenTag"||l.name=="CloseTag"||l.name=="SelfClosingTag"||l.name=="MismatchedCloseTag")&&(r=l);if(r&&(r.to>e||r.lastChild.type.isError)){let l=r.parent;if(n.name=="TagName")return r.name=="CloseTag"||r.name=="MismatchedCloseTag"?{type:"closeTag",from:n.from,context:l}:{type:"openTag",from:n.from,context:Wa(l)};if(n.name=="AttributeName")return{type:"attrName",from:n.from,context:r};if(n.name=="AttributeValue")return{type:"attrValue",from:n.from,context:r};let o=n==r||n.name=="Attribute"?n.childBefore(e):n;return(o==null?void 0:o.name)=="StartTag"?{type:"openTag",from:e,context:Wa(l)}:(o==null?void 0:o.name)=="StartCloseTag"&&o.to<=e?{type:"closeTag",from:e,context:l}:(o==null?void 0:o.name)=="Is"?{type:"attrValue",from:e,context:r}:o?{type:"attrName",from:e,context:r}:null}else if(n.name=="StartCloseTag")return{type:"closeTag",from:e,context:n.parent};for(;n.parent&&n.to==e&&!(!((t=n.lastChild)===null||t===void 0)&&t.type.isError);)n=n.parent;return n.name=="Element"||n.name=="Text"||n.name=="Document"?{type:"tag",from:e,context:n.name=="Element"?n:Wa(n)}:null}class Oc{constructor(e,t,n){this.attrs=t,this.attrValues=n,this.children=[],this.name=e.name,this.completion=Object.assign(Object.assign({type:"type"},e.completion||{}),{label:this.name}),this.openCompletion=Object.assign(Object.assign({},this.completion),{label:"<"+this.name}),this.closeCompletion=Object.assign(Object.assign({},this.completion),{label:"</"+this.name+">",boost:2}),this.closeNameCompletion=Object.assign(Object.assign({},this.completion),{label:this.name+">"}),this.text=e.textContent?e.textContent.map(r=>({label:r,type:"text"})):[]}}const za=/^[:\-\.\w\u00b7-\uffff]*$/;function wr(a){return Object.assign(Object.assign({type:"property"},a.completion||{}),{label:a.name})}function Tr(a){return typeof a=="string"?{label:`"${a}"`,type:"constant"}:/^"/.test(a.label)?a:Object.assign(Object.assign({},a),{label:`"${a.label}"`})}function wc(a,e){let t=[],n=[],r=Object.create(null);for(let s of e){let c=wr(s);t.push(c),s.global&&n.push(c),s.values&&(r[s.name]=s.values.map(Tr))}let l=[],o=[],i=Object.create(null);for(let s of a){let c=n,u=r;s.attributes&&(c=c.concat(s.attributes.map(m=>typeof m=="string"?t.find(h=>h.label==m)||{label:m,type:"property"}:(m.values&&(u==r&&(u=Object.create(u)),u[m.name]=m.values.map(Tr)),wr(m)))));let p=new Oc(s,c,u);i[p.name]=p,l.push(p),s.top&&o.push(p)}o.length||(o=l);for(let s=0;s<l.length;s++){let c=a[s],u=l[s];if(c.children)for(let p of c.children)i[p]&&u.children.push(i[p]);else u.children=l}return s=>{var c;let{doc:u}=s.state,p=Sc(s.state,s.pos);if(!p||p.type=="tag"&&!s.explicit)return null;let{type:m,from:h,context:g}=p;if(m=="openTag"){let w=o,b=Fa(u,g);if(b){let f=i[b];w=(f==null?void 0:f.children)||l}return{from:h,options:w.map(f=>f.completion),validFor:za}}else if(m=="closeTag"){let w=Fa(u,g);return w?{from:h,to:s.pos+(u.sliceString(s.pos,s.pos+1)==">"?1:0),options:[((c=i[w])===null||c===void 0?void 0:c.closeNameCompletion)||{label:w+">",type:"type"}],validFor:za}:null}else if(m=="attrName"){let w=i[aa(u,g)];return{from:h,options:(w==null?void 0:w.attrs)||n,validFor:za}}else if(m=="attrValue"){let w=_c(u,g,h);if(!w)return null;let b=i[aa(u,g)],f=((b==null?void 0:b.attrValues)||r)[w];return!f||!f.length?null:{from:h,to:s.pos+(u.sliceString(s.pos,s.pos+1)=='"'?1:0),options:f,validFor:/^"[^"]*"?$/}}else if(m=="tag"){let w=Fa(u,g),b=i[w],f=[],_=g&&g.lastChild;w&&(!_||_.name!="CloseTag"||aa(u,_)!=w)&&f.push(b?b.closeCompletion:{label:"</"+w+">",type:"type",boost:2});let T=f.concat(((b==null?void 0:b.children)||(g?l:o)).map(k=>k.openCompletion));if(g&&(b!=null&&b.text.length)){let k=g.firstChild;k.to>s.pos-20&&!/\S/.test(s.state.sliceDoc(k.to,s.pos))&&(T=T.concat(b.text))}return{from:h,options:T,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}else return null}}const kr=fa.define({name:"xml",parser:Ju.configure({props:[mc.add({Element(a){let e=/^\s*<\//.test(a.textAfter);return a.lineIndent(a.node.from)+(e?0:a.unit)},"OpenTag CloseTag SelfClosingTag"(a){return a.column(a.node.from)+a.unit}}),hc.add({Element(a){let e=a.firstChild,t=a.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:t.name=="CloseTag"?t.from:a.to}}}),gc.add({"OpenTag CloseTag":a=>a.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/$/}});function Tc(a={}){return new fc(kr,kr.data.of({autocomplete:wc(a.elements||[],a.attributes||[])}))}const na=q({__name:"LabEditorDataGridGridCellDetailCodeRenderer",props:{value:{},codeLanguage:{default:Re.Raw},fillSpace:{type:Boolean,default:!0}},setup(a){const e=a,t=Be(),n=On(),r=G(!0),l=x(()=>{const u=[{title:"Copy",value:"copy",props:{prependIcon:"mdi-content-copy"}}];return e.codeLanguage!==Re.Raw&&u.push({title:r.value?"Display raw value":"Pretty print value",value:"pretty-print",props:{prependIcon:r.value?"mdi-raw":"mdi-auto-fix"}}),u}),o=x(()=>{try{return n.formatEntityPropertyValue(e.value,e.codeLanguage,r.value)}catch(u){return console.error(u),`Error: Failed to format value as ${e.codeLanguage}. \r
\r
`+(u!=null&&u.message?`${u.message}.`:"")}}),i=x(()=>{if(!o.value)return[];switch(e.codeLanguage){case Re.Raw:return[];case Re.Json:return[yi()];case Re.Xml:return[Tc()];default:return t.error(new tt(void 0,"Unsupported code language.")),[]}});function s(u){switch(u){case"copy":c();break;case"pretty-print":r.value=!r.value;break}}function c(){navigator.clipboard.writeText(o.value).then(()=>{t.info("Copied to clipboard.")}).catch(()=>{t.error(new tt(void 0,"Failed to copy to clipboard."))})}return(u,p)=>(S(),P(Cn,{"fill-space":u.fillSpace,actions:l.value,"onClick:action":s},{default:y(()=>[d(bi,{"model-value":o.value,"read-only":"","additional-extensions":i.value},null,8,["model-value","additional-extensions"])]),_:1},8,["fill-space","actions"]))}});/*! @license DOMPurify 3.0.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.6/LICENSE */const{entries:Ml,setPrototypeOf:Pr,isFrozen:kc,getPrototypeOf:Pc,getOwnPropertyDescriptor:Gl}=Object;let{freeze:Pe,seal:Ne,create:Ul}=Object,{apply:un,construct:cn}=typeof Reflect<"u"&&Reflect;Pe||(Pe=function(e){return e});Ne||(Ne=function(e){return e});un||(un=function(e,t,n){return e.apply(t,n)});cn||(cn=function(e,t){return new e(...t)});const jt=$e(Array.prototype.forEach),Er=$e(Array.prototype.pop),Dt=$e(Array.prototype.push),ra=$e(String.prototype.toLowerCase),Ha=$e(String.prototype.toString),Ec=$e(String.prototype.match),Lt=$e(String.prototype.replace),Cc=$e(String.prototype.indexOf),Ac=$e(String.prototype.trim),De=$e(RegExp.prototype.test),It=xc(TypeError);function $e(a){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return un(a,e,n)}}function xc(a){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cn(a,t)}}function Q(a,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ra;Pr&&Pr(a,null);let n=e.length;for(;n--;){let r=e[n];if(typeof r=="string"){const l=t(r);l!==r&&(kc(e)||(e[n]=l),r=l)}a[r]=!0}return a}function vt(a){const e=Ul(null);for(const[t,n]of Ml(a))Gl(a,t)!==void 0&&(e[t]=n);return e}function Yt(a,e){for(;a!==null;){const n=Gl(a,e);if(n){if(n.get)return $e(n.get);if(typeof n.value=="function")return $e(n.value)}a=Pc(a)}function t(n){return console.warn("fallback value for",n),null}return t}const Cr=Pe(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),qa=Pe(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Qa=Pe(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Dc=Pe(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Xa=Pe(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Lc=Pe(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ar=Pe(["#text"]),xr=Pe(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ja=Pe(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Dr=Pe(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Kt=Pe(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ic=Ne(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Vc=Ne(/<%[\w\W]*|[\w\W]*%>/gm),$c=Ne(/\${[\w\W]*}/gm),Rc=Ne(/^data-[\-\w.\u00B7-\uFFFF]/),Nc=Ne(/^aria-[\-\w]+$/),Fl=Ne(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Bc=Ne(/^(?:\w+script|data):/i),Mc=Ne(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Wl=Ne(/^html$/i);var Lr=Object.freeze({__proto__:null,MUSTACHE_EXPR:Ic,ERB_EXPR:Vc,TMPLIT_EXPR:$c,DATA_ATTR:Rc,ARIA_ATTR:Nc,IS_ALLOWED_URI:Fl,IS_SCRIPT_OR_DATA:Bc,ATTR_WHITESPACE:Mc,DOCTYPE_NAME:Wl});const Gc=function(){return typeof window>"u"?null:window},Uc=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const l="dompurify"+(n?"#"+n:"");try{return e.createPolicy(l,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}};function zl(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Gc();const e=B=>zl(B);if(e.version="3.0.6",e.removed=[],!a||!a.document||a.document.nodeType!==9)return e.isSupported=!1,e;let{document:t}=a;const n=t,r=n.currentScript,{DocumentFragment:l,HTMLTemplateElement:o,Node:i,Element:s,NodeFilter:c,NamedNodeMap:u=a.NamedNodeMap||a.MozNamedAttrMap,HTMLFormElement:p,DOMParser:m,trustedTypes:h}=a,g=s.prototype,w=Yt(g,"cloneNode"),b=Yt(g,"nextSibling"),f=Yt(g,"childNodes"),_=Yt(g,"parentNode");if(typeof o=="function"){const B=t.createElement("template");B.content&&B.content.ownerDocument&&(t=B.content.ownerDocument)}let T,k="";const{implementation:O,createNodeIterator:C,createDocumentFragment:L,getElementsByTagName:z}=t,{importNode:U}=n;let I={};e.isSupported=typeof Ml=="function"&&typeof _=="function"&&O&&O.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:W,ERB_EXPR:K,TMPLIT_EXPR:J,DATA_ATTR:ge,ARIA_ATTR:ae,IS_SCRIPT_OR_DATA:ce,ATTR_WHITESPACE:Ce}=Lr;let{IS_ALLOWED_URI:de}=Lr,A=null;const R=Q({},[...Cr,...qa,...Qa,...Xa,...Ar]);let N=null;const Y=Q({},[...xr,...ja,...Dr,...Kt]);let H=Object.seal(Ul(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Me=null,kt=null,Gt=!0,ze=!0,Pt=!1,Et=!0,He=!1,nt=!1,Aa=!1,xa=!1,dt=!1,Ut=!1,Ft=!1,Vn=!0,$n=!1;const jl="user-content-";let Da=!0,Ct=!1,pt={},ft=null;const Rn=Q({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Nn=null;const Bn=Q({},["audio","video","img","source","image","track"]);let La=null;const Mn=Q({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Wt="http://www.w3.org/1998/Math/MathML",zt="http://www.w3.org/2000/svg",qe="http://www.w3.org/1999/xhtml";let mt=qe,Ia=!1,Va=null;const Yl=Q({},[Wt,zt,qe],Ha);let rt=null;const Kl=["application/xhtml+xml","text/html"],Zl="text/html";let me=null,ht=null;const Jl=t.createElement("form"),Gn=function(v){return v instanceof RegExp||v instanceof Function},$a=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ht&&ht===v)){if((!v||typeof v!="object")&&(v={}),v=vt(v),rt=Kl.indexOf(v.PARSER_MEDIA_TYPE)===-1?rt=Zl:rt=v.PARSER_MEDIA_TYPE,me=rt==="application/xhtml+xml"?Ha:ra,A="ALLOWED_TAGS"in v?Q({},v.ALLOWED_TAGS,me):R,N="ALLOWED_ATTR"in v?Q({},v.ALLOWED_ATTR,me):Y,Va="ALLOWED_NAMESPACES"in v?Q({},v.ALLOWED_NAMESPACES,Ha):Yl,La="ADD_URI_SAFE_ATTR"in v?Q(vt(Mn),v.ADD_URI_SAFE_ATTR,me):Mn,Nn="ADD_DATA_URI_TAGS"in v?Q(vt(Bn),v.ADD_DATA_URI_TAGS,me):Bn,ft="FORBID_CONTENTS"in v?Q({},v.FORBID_CONTENTS,me):Rn,Me="FORBID_TAGS"in v?Q({},v.FORBID_TAGS,me):{},kt="FORBID_ATTR"in v?Q({},v.FORBID_ATTR,me):{},pt="USE_PROFILES"in v?v.USE_PROFILES:!1,Gt=v.ALLOW_ARIA_ATTR!==!1,ze=v.ALLOW_DATA_ATTR!==!1,Pt=v.ALLOW_UNKNOWN_PROTOCOLS||!1,Et=v.ALLOW_SELF_CLOSE_IN_ATTR!==!1,He=v.SAFE_FOR_TEMPLATES||!1,nt=v.WHOLE_DOCUMENT||!1,dt=v.RETURN_DOM||!1,Ut=v.RETURN_DOM_FRAGMENT||!1,Ft=v.RETURN_TRUSTED_TYPE||!1,xa=v.FORCE_BODY||!1,Vn=v.SANITIZE_DOM!==!1,$n=v.SANITIZE_NAMED_PROPS||!1,Da=v.KEEP_CONTENT!==!1,Ct=v.IN_PLACE||!1,de=v.ALLOWED_URI_REGEXP||Fl,mt=v.NAMESPACE||qe,H=v.CUSTOM_ELEMENT_HANDLING||{},v.CUSTOM_ELEMENT_HANDLING&&Gn(v.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(H.tagNameCheck=v.CUSTOM_ELEMENT_HANDLING.tagNameCheck),v.CUSTOM_ELEMENT_HANDLING&&Gn(v.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(H.attributeNameCheck=v.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),v.CUSTOM_ELEMENT_HANDLING&&typeof v.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(H.allowCustomizedBuiltInElements=v.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),He&&(ze=!1),Ut&&(dt=!0),pt&&(A=Q({},[...Ar]),N=[],pt.html===!0&&(Q(A,Cr),Q(N,xr)),pt.svg===!0&&(Q(A,qa),Q(N,ja),Q(N,Kt)),pt.svgFilters===!0&&(Q(A,Qa),Q(N,ja),Q(N,Kt)),pt.mathMl===!0&&(Q(A,Xa),Q(N,Dr),Q(N,Kt))),v.ADD_TAGS&&(A===R&&(A=vt(A)),Q(A,v.ADD_TAGS,me)),v.ADD_ATTR&&(N===Y&&(N=vt(N)),Q(N,v.ADD_ATTR,me)),v.ADD_URI_SAFE_ATTR&&Q(La,v.ADD_URI_SAFE_ATTR,me),v.FORBID_CONTENTS&&(ft===Rn&&(ft=vt(ft)),Q(ft,v.FORBID_CONTENTS,me)),Da&&(A["#text"]=!0),nt&&Q(A,["html","head","body"]),A.table&&(Q(A,["tbody"]),delete Me.tbody),v.TRUSTED_TYPES_POLICY){if(typeof v.TRUSTED_TYPES_POLICY.createHTML!="function")throw It('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof v.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw It('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=v.TRUSTED_TYPES_POLICY,k=T.createHTML("")}else T===void 0&&(T=Uc(h,r)),T!==null&&typeof k=="string"&&(k=T.createHTML(""));Pe&&Pe(v),ht=v}},Un=Q({},["mi","mo","mn","ms","mtext"]),Fn=Q({},["foreignobject","desc","title","annotation-xml"]),eo=Q({},["title","style","font","a","script"]),Ht=Q({},qa);Q(Ht,Qa),Q(Ht,Dc);const Ra=Q({},Xa);Q(Ra,Lc);const to=function(v){let E=_(v);(!E||!E.tagName)&&(E={namespaceURI:mt,tagName:"template"});const $=ra(v.tagName),re=ra(E.tagName);return Va[v.namespaceURI]?v.namespaceURI===zt?E.namespaceURI===qe?$==="svg":E.namespaceURI===Wt?$==="svg"&&(re==="annotation-xml"||Un[re]):!!Ht[$]:v.namespaceURI===Wt?E.namespaceURI===qe?$==="math":E.namespaceURI===zt?$==="math"&&Fn[re]:!!Ra[$]:v.namespaceURI===qe?E.namespaceURI===zt&&!Fn[re]||E.namespaceURI===Wt&&!Un[re]?!1:!Ra[$]&&(eo[$]||!Ht[$]):!!(rt==="application/xhtml+xml"&&Va[v.namespaceURI]):!1},lt=function(v){Dt(e.removed,{element:v});try{v.parentNode.removeChild(v)}catch{v.remove()}},Na=function(v,E){try{Dt(e.removed,{attribute:E.getAttributeNode(v),from:E})}catch{Dt(e.removed,{attribute:null,from:E})}if(E.removeAttribute(v),v==="is"&&!N[v])if(dt||Ut)try{lt(E)}catch{}else try{E.setAttribute(v,"")}catch{}},Wn=function(v){let E=null,$=null;if(xa)v="<remove></remove>"+v;else{const be=Ec(v,/^[\r\n\t ]+/);$=be&&be[0]}rt==="application/xhtml+xml"&&mt===qe&&(v='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+v+"</body></html>");const re=T?T.createHTML(v):v;if(mt===qe)try{E=new m().parseFromString(re,rt)}catch{}if(!E||!E.documentElement){E=O.createDocument(mt,"template",null);try{E.documentElement.innerHTML=Ia?k:re}catch{}}const ye=E.body||E.documentElement;return v&&$&&ye.insertBefore(t.createTextNode($),ye.childNodes[0]||null),mt===qe?z.call(E,nt?"html":"body")[0]:nt?E.documentElement:ye},zn=function(v){return C.call(v.ownerDocument||v,v,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null)},ao=function(v){return v instanceof p&&(typeof v.nodeName!="string"||typeof v.textContent!="string"||typeof v.removeChild!="function"||!(v.attributes instanceof u)||typeof v.removeAttribute!="function"||typeof v.setAttribute!="function"||typeof v.namespaceURI!="string"||typeof v.insertBefore!="function"||typeof v.hasChildNodes!="function")},Hn=function(v){return typeof i=="function"&&v instanceof i},Qe=function(v,E,$){I[v]&&jt(I[v],re=>{re.call(e,E,$,ht)})},qn=function(v){let E=null;if(Qe("beforeSanitizeElements",v,null),ao(v))return lt(v),!0;const $=me(v.nodeName);if(Qe("uponSanitizeElement",v,{tagName:$,allowedTags:A}),v.hasChildNodes()&&!Hn(v.firstElementChild)&&De(/<[/\w]/g,v.innerHTML)&&De(/<[/\w]/g,v.textContent))return lt(v),!0;if(!A[$]||Me[$]){if(!Me[$]&&Xn($)&&(H.tagNameCheck instanceof RegExp&&De(H.tagNameCheck,$)||H.tagNameCheck instanceof Function&&H.tagNameCheck($)))return!1;if(Da&&!ft[$]){const re=_(v)||v.parentNode,ye=f(v)||v.childNodes;if(ye&&re){const be=ye.length;for(let Ae=be-1;Ae>=0;--Ae)re.insertBefore(w(ye[Ae],!0),b(v))}}return lt(v),!0}return v instanceof s&&!to(v)||($==="noscript"||$==="noembed"||$==="noframes")&&De(/<\/no(script|embed|frames)/i,v.innerHTML)?(lt(v),!0):(He&&v.nodeType===3&&(E=v.textContent,jt([W,K,J],re=>{E=Lt(E,re," ")}),v.textContent!==E&&(Dt(e.removed,{element:v.cloneNode()}),v.textContent=E)),Qe("afterSanitizeElements",v,null),!1)},Qn=function(v,E,$){if(Vn&&(E==="id"||E==="name")&&($ in t||$ in Jl))return!1;if(!(ze&&!kt[E]&&De(ge,E))){if(!(Gt&&De(ae,E))){if(!N[E]||kt[E]){if(!(Xn(v)&&(H.tagNameCheck instanceof RegExp&&De(H.tagNameCheck,v)||H.tagNameCheck instanceof Function&&H.tagNameCheck(v))&&(H.attributeNameCheck instanceof RegExp&&De(H.attributeNameCheck,E)||H.attributeNameCheck instanceof Function&&H.attributeNameCheck(E))||E==="is"&&H.allowCustomizedBuiltInElements&&(H.tagNameCheck instanceof RegExp&&De(H.tagNameCheck,$)||H.tagNameCheck instanceof Function&&H.tagNameCheck($))))return!1}else if(!La[E]){if(!De(de,Lt($,Ce,""))){if(!((E==="src"||E==="xlink:href"||E==="href")&&v!=="script"&&Cc($,"data:")===0&&Nn[v])){if(!(Pt&&!De(ce,Lt($,Ce,"")))){if($)return!1}}}}}}return!0},Xn=function(v){return v.indexOf("-")>0},jn=function(v){Qe("beforeSanitizeAttributes",v,null);const{attributes:E}=v;if(!E)return;const $={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:N};let re=E.length;for(;re--;){const ye=E[re],{name:be,namespaceURI:Ae,value:ot}=ye,At=me(be);let xe=be==="value"?ot:Ac(ot);if($.attrName=At,$.attrValue=xe,$.keepAttr=!0,$.forceKeepAttr=void 0,Qe("uponSanitizeAttribute",v,$),xe=$.attrValue,$.forceKeepAttr||(Na(be,v),!$.keepAttr))continue;if(!Et&&De(/\/>/i,xe)){Na(be,v);continue}He&&jt([W,K,J],Kn=>{xe=Lt(xe,Kn," ")});const Yn=me(v.nodeName);if(Qn(Yn,At,xe)){if($n&&(At==="id"||At==="name")&&(Na(be,v),xe=jl+xe),T&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!Ae)switch(h.getAttributeType(Yn,At)){case"TrustedHTML":{xe=T.createHTML(xe);break}case"TrustedScriptURL":{xe=T.createScriptURL(xe);break}}try{Ae?v.setAttributeNS(Ae,be,xe):v.setAttribute(be,xe),Er(e.removed)}catch{}}}Qe("afterSanitizeAttributes",v,null)},no=function B(v){let E=null;const $=zn(v);for(Qe("beforeSanitizeShadowDOM",v,null);E=$.nextNode();)Qe("uponSanitizeShadowNode",E,null),!qn(E)&&(E.content instanceof l&&B(E.content),jn(E));Qe("afterSanitizeShadowDOM",v,null)};return e.sanitize=function(B){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=null,$=null,re=null,ye=null;if(Ia=!B,Ia&&(B="<!-->"),typeof B!="string"&&!Hn(B))if(typeof B.toString=="function"){if(B=B.toString(),typeof B!="string")throw It("dirty is not a string, aborting")}else throw It("toString is not a function");if(!e.isSupported)return B;if(Aa||$a(v),e.removed=[],typeof B=="string"&&(Ct=!1),Ct){if(B.nodeName){const ot=me(B.nodeName);if(!A[ot]||Me[ot])throw It("root node is forbidden and cannot be sanitized in-place")}}else if(B instanceof i)E=Wn("<!---->"),$=E.ownerDocument.importNode(B,!0),$.nodeType===1&&$.nodeName==="BODY"||$.nodeName==="HTML"?E=$:E.appendChild($);else{if(!dt&&!He&&!nt&&B.indexOf("<")===-1)return T&&Ft?T.createHTML(B):B;if(E=Wn(B),!E)return dt?null:Ft?k:""}E&&xa&&lt(E.firstChild);const be=zn(Ct?B:E);for(;re=be.nextNode();)qn(re)||(re.content instanceof l&&no(re.content),jn(re));if(Ct)return B;if(dt){if(Ut)for(ye=L.call(E.ownerDocument);E.firstChild;)ye.appendChild(E.firstChild);else ye=E;return(N.shadowroot||N.shadowrootmode)&&(ye=U.call(n,ye,!0)),ye}let Ae=nt?E.outerHTML:E.innerHTML;return nt&&A["!doctype"]&&E.ownerDocument&&E.ownerDocument.doctype&&E.ownerDocument.doctype.name&&De(Wl,E.ownerDocument.doctype.name)&&(Ae="<!DOCTYPE "+E.ownerDocument.doctype.name+`>
`+Ae),He&&jt([W,K,J],ot=>{Ae=Lt(Ae,ot," ")}),T&&Ft?T.createHTML(Ae):Ae},e.setConfig=function(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$a(B),Aa=!0},e.clearConfig=function(){ht=null,Aa=!1},e.isValidAttribute=function(B,v,E){ht||$a({});const $=me(B),re=me(v);return Qn($,re,E)},e.addHook=function(B,v){typeof v=="function"&&(I[B]=I[B]||[],Dt(I[B],v))},e.removeHook=function(B){if(I[B])return Er(I[B])},e.removeHooks=function(B){I[B]&&(I[B]=[])},e.removeAllHooks=function(){I={}},e}var Fc=zl();const Wc={class:"html-renderer"},zc=["innerHTML"],Hc=q({__name:"LabEditorDataGridGridCellDetailHtmlRenderer",props:{value:{},fillSpace:{type:Boolean,default:!0}},setup(a){const e=a,t=x(()=>typeof e.value!="string"?"Error: Failed to render HTML. Value is not a string.":Fc.sanitize(e.value.toString()));return(n,r)=>(S(),P(Cn,{"fill-space":n.fillSpace},{default:y(()=>[M("div",Wc,[M("div",{innerHTML:t.value},null,8,zc)])]),_:1},8,["fill-space"]))}});const Hl=se(Hc,[["__scopeId","data-v-9b8348bc"]]),qc=q({__name:"LabEditorDataGridGridCellDetailAutoPrettyPrintRenderer",props:{dataType:{},value:{},fillSpace:{type:Boolean,default:!0}},setup(a){const e=a,t=["<div","<a","<p","<span","<ul","<li","<img","<h1","<h2","<h3","<input","<body","<html","<head","<title","<meta","<link","<style","<script","<br","<ol","<h4","<h5","<h6","<i","<b","<form"],n=x(()=>{const l={};if(!e.dataType)l.renderer={type:"code",codeLanguage:Re.Raw},e.value instanceof Object?l.value=JSON.stringify(e.value):l.value=e.value.toString();else switch(e.dataType){case Z.String:{const o=e.value.trim();o.startsWith("{")||o.startsWith("[")?(l.renderer={type:"code",codeLanguage:Re.Json},l.value=o):o.startsWith("<")?(r(o)?l.renderer={type:"html"}:l.renderer={type:"code",codeLanguage:Re.Xml},l.value=o):(l.renderer={type:"markdown"},l.value=o);break}case Z.ComplexDataObject:l.renderer={type:"code",codeLanguage:Re.Json},l.value=e.value;break;default:l.renderer={type:"markdown"},l.value=e.value;break}return l});function r(l){for(const o of t)if(l.includes(o))return!0;return!1}return(l,o)=>n.value.renderer.type==="markdown"?(S(),P(Vl,{key:0,value:n.value.value,"data-type":l.dataType},null,8,["value","data-type"])):n.value.renderer.type==="code"?(S(),P(na,{key:1,value:n.value.value,"code-language":n.value.renderer.codeLanguage},null,8,["value","code-language"])):n.value.renderer.type==="html"?(S(),P(Hl,{key:2,value:n.value.value},null,8,["value"])):ee("",!0)}}),ql=q({__name:"LabEditorDataGridGridCellDetailDelegateRenderer",props:{dataType:{},value:{},outputFormat:{default:Te.AutoPrettyPrint},fillSpace:{type:Boolean,default:!0}},setup(a){return(e,t)=>e.outputFormat===V(Te).AutoPrettyPrint?(S(),P(qc,{key:0,"data-type":e.dataType,value:e.value,"fill-space":e.fillSpace},null,8,["data-type","value","fill-space"])):e.outputFormat===V(Te).Markdown?(S(),P(Vl,{key:1,value:e.value,"data-type":e.dataType,"fill-space":e.fillSpace},null,8,["value","data-type","fill-space"])):e.outputFormat===V(Te).Raw?(S(),P(na,{key:2,value:e.value,"fill-space":e.fillSpace},null,8,["value","fill-space"])):e.outputFormat===V(Te).Json?(S(),P(na,{key:3,value:e.value,"code-language":V(Re).Json,"fill-space":e.fillSpace},null,8,["value","code-language","fill-space"])):e.outputFormat===V(Te).Xml?(S(),P(na,{key:4,value:e.value,"code-language":V(Re).Xml,"fill-space":e.fillSpace},null,8,["value","code-language","fill-space"])):e.outputFormat===V(Te).Html?(S(),P(Hl,{key:5,value:e.value,"fill-space":e.fillSpace},null,8,["value","fill-space"])):ee("",!0)}}),Ql=q({__name:"LabEditorDataGridGridCellDetailOutputFormatSelector",props:{modelValue:{}},emits:["update:modelValue"],setup(a,{emit:e}){const t=[{title:"Auto pretty print",value:Te.AutoPrettyPrint,props:{prependIcon:"mdi-auto-fix"}},{title:"Raw value",value:Te.Raw,props:{prependIcon:"mdi-text"}},{title:"Markdown",value:Te.Markdown,props:{prependIcon:"mdi-language-markdown-outline"}},{title:"JSON",value:Te.Json,props:{prependIcon:"mdi-code-json"}},{title:"XML",value:Te.Xml,props:{prependIcon:"mdi-xml"}},{title:"HTML",value:Te.Html,props:{prependIcon:"mdi-language-html5"}}];return(n,r)=>(S(),P(_a,null,{activator:y(({props:l})=>[d(ie,pe({icon:"",variant:"text",density:"compact"},l),{default:y(()=>[d(ne,null,{default:y(()=>[D("mdi-code-braces")]),_:1}),d(fe,{activator:"parent"},{default:y(()=>[D(" Select output format ")]),_:1})]),_:2},1040)]),default:y(()=>[d(st,{selected:[n.modelValue],items:t,"onUpdate:selected":r[0]||(r[0]=l=>e("update:modelValue",l[0]))},null,8,["selected"])]),_:1}))}}),In=Oa("flex-grow-1","div","VSpacer"),Qc={class:"array-item__title"},Xc={class:"mr-2"},jc={class:"array-item__content"},Yc=q({__name:"LabEditorDataGridGridDetailValueListItem",props:{value:{},componentDataType:{}},setup(a){const e=G(Te.AutoPrettyPrint);return(t,n)=>(S(),P(Oi,null,{default:y(()=>[d(_i,null,{default:y(()=>[M("div",Qc,j(t.value),1),d(In),M("div",Xc,[d(Ql,{modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=r=>e.value=r),class:"mr-4"},null,8,["modelValue"])])]),_:1}),d(Si,null,{default:y(()=>[M("div",jc,[d(ql,{"data-type":t.componentDataType,value:t.value,"output-format":e.value,"fill-space":!1},null,8,["data-type","value","output-format"])])]),_:1})]),_:1}))}}),Kc=q({__name:"LabEditorDataGridGridCellDetail",props:{modelValue:{type:Boolean},propertyDescriptor:{},propertyValue:{}},emits:["update:modelValue"],setup(a,{emit:e}){const t=a,n=x(()=>{var c;const s=(c=t.propertyDescriptor)==null?void 0:c.type;if(s===F.AssociatedData)return"mdi-package-variant-closed";if(s===F.References)return"mdi-link-variant"}),r=G(Te.AutoPrettyPrint),l=x(()=>{var s,c,u;if(((s=t.propertyDescriptor)==null?void 0:s.type)===F.Entity)switch(t.propertyDescriptor.key.name){case bt.PrimaryKey:return Z.Integer;case bt.Locales:case bt.AllLocales:return Z.LocaleArray;case bt.PriceInnerRecordHandling:return Z.String;default:return}return(u=(c=t.propertyDescriptor)==null?void 0:c.schema)==null?void 0:u.type}),o=x(()=>{var s;return((s=l==null?void 0:l.value)==null?void 0:s.endsWith("Array"))||!1}),i=x(()=>{if(l.value)return o.value?l.value.replace("Array",""):l.value});return(s,c)=>(S(),P(ka,{class:"data-grid-cell-detail"},{default:y(()=>[d(rl,null,{default:y(()=>{var u;return[n.value?(S(),P(ne,{key:0,class:"mr-2"},{default:y(()=>[D(j(n.value),1)]),_:1})):ee("",!0),M("span",null,j(((u=s.propertyDescriptor)==null?void 0:u.title)||"Unknown property"),1)]}),actions:y(()=>[o.value?ee("",!0):(S(),P(Ql,{key:0,modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=u=>r.value=u)},null,8,["modelValue"])),d(ie,{icon:"",variant:"flat",density:"compact",onClick:c[1]||(c[1]=u=>e("update:modelValue",!1))},{default:y(()=>[d(ne,null,{default:y(()=>[D("mdi-close")]),_:1}),d(fe,{activator:"parent"},{default:y(()=>[D(" Close detail ")]),_:1})]),_:1})]),_:1}),d(Yr),d(Bt,{class:"data-grid-cell-detail__body"},{default:y(()=>[o.value?(S(),P(wi,{key:1,variant:"accordion",multiple:"",class:"pa-4"},{default:y(()=>[(S(!0),X(te,null,ke(s.propertyValue,(u,p)=>(S(),P(Yc,{key:p,value:u,"component-data-type":i.value},null,8,["value","component-data-type"]))),128))]),_:1})):(S(),P(ql,{key:0,"data-type":i.value,value:s.propertyValue,"output-format":r.value},null,8,["data-type","value","output-format"]))]),_:1})]),_:1}))}});const Zc=se(Kc,[["__scopeId","data-v-4655d3c1"]]),Jc=["onMouseup"],ed={class:"data-grid-cell__body"},td={key:0,class:"text-disabled"},ad={key:1,class:"text-disabled"},nd={key:2,class:"text-disabled"},rd=q({__name:"LabEditorDataGridGridCell",props:{propertyDescriptor:{},dataLocale:{},propertyValue:{}},emits:["click"],setup(a,{emit:e}){const t=a,n=Be(),r=x(()=>i(t.propertyValue)),l=x(()=>{var c,u,p,m,h,g;return((c=t.propertyDescriptor)==null?void 0:c.type)===F.Entity&&((u=t.propertyDescriptor)==null?void 0:u.key.name)===bt.ParentPrimaryKey||((p=t.propertyDescriptor)==null?void 0:p.type)===F.Attributes&&t.propertyDescriptor.schema.type===Z.Predecessor||((m=t.propertyDescriptor)==null?void 0:m.type)===F.AssociatedData&&t.propertyDescriptor.schema.type===Z.Predecessor?!0:!!((g=(h=t.propertyDescriptor)==null?void 0:h.schema)!=null&&g.referencedEntityType)}),o=x(()=>r.value.length<=100);function i(c){if(c==null)return"";if(c instanceof Array)return c.length===0?"":`[${c.map(u=>i(u)).join(", ")}]`;if(c instanceof Ti){const u=[];for(const p of c.representativeAttributes)p instanceof Array?u.push(...p.map(m=>i(m))):u.push(i(p));return u.length===0?`${c.primaryKey}`:`${c.primaryKey}: ${u.join(", ")}`}else return c instanceof Object?JSON.stringify(c):c.toString()}function s(){r.value&&navigator.clipboard.writeText(r.value).then(()=>{n.info("Copied to clipboard.")}).catch(()=>{n.error(new tt(void 0,"Failed to copy to clipboard."))})}return(c,u)=>{var p,m;return S(),X("td",{class:Sa({"data-grid-cell--clickable":r.value}),onClick:u[0]||(u[0]=h=>e("click")),onMouseup:Je(s,["middle"])},[M("span",ed,[(m=(p=c.propertyDescriptor)==null?void 0:p.schema)!=null&&m.localized&&!c.dataLocale?(S(),X("span",td,"<no locale selected>")):c.propertyValue instanceof Array&&c.propertyValue.length===0?(S(),X("span",ad,"<empty array>")):c.propertyValue?(S(),X(te,{key:3},[l.value?(S(),P(ne,{key:0,class:"mr-1"},{default:y(()=>[D("mdi-open-in-new")]),_:1})):ee("",!0),M("span",null,[D(j(r.value)+" ",1),o.value?(S(),P(fe,{key:0,activator:"parent"},{default:y(()=>[D(j(r.value),1)]),_:1})):ee("",!0)])],64)):(S(),X("span",nd,"<null>"))])],42,Jc)}}});const ld=se(rd,[["__scopeId","data-v-59fd49fd"]]),od={class:"data-grid-column-header-content"},id={class:"data-grid-column-header-content__title"},sd=q({__name:"LabEditorDataGridGridColumnHeader",props:{column:{},isSorted:{type:Function},getSortIcon:{type:Function},toggleSort:{type:Function}},setup(a){const e=a,t=x(()=>{var s;const i=(s=e.column.descriptor)==null?void 0:s.type;if(i===F.AssociatedData)return"mdi-package-variant-closed";if(i===F.References||i===F.ReferenceAttributes)return"mdi-link-variant"}),n=x(()=>{var i;return(i=e.column.descriptor)==null?void 0:i.isSortable()}),r=x(()=>e.isSorted(e.column)),l=x(()=>{var i;return(i=e.column.descriptor)==null?void 0:i.isLocalized()});function o(){n.value&&e.toggleSort(e.column)}return(i,s)=>(S(),X("th",{onClick:o,class:Sa(["data-grid-column-header",{"data-grid-column-header--sortable":n.value}])},[M("div",od,[M("div",id,[t.value?(S(),P(ne,{key:0},{default:y(()=>[D(j(t.value),1)]),_:1})):ee("",!0),M("span",null,j(i.column.title),1),l.value?(S(),P(ne,{key:1},{default:y(()=>[D("mdi-translate")]),_:1})):ee("",!0)]),r.value?(S(),P(ne,{key:0},{default:y(()=>[D(j(e.getSortIcon(e.column)),1)]),_:1})):n.value?(S(),P(ne,{key:1},{default:y(()=>[D("mdi-sort")]),_:1})):ee("",!0)])],2))}});const ud=se(sd,[["__scopeId","data-v-2b3306cc"]]),cd=q({__name:"LabEditorDataGridGrid",props:{gridProps:{},entityPropertyDescriptorIndex:{},dataLocale:{},queryLanguage:{},displayedGridHeaders:{},loading:{type:Boolean},resultEntities:{},totalResultCount:{},pageNumber:{},pageSize:{}},emits:["gridUpdated"],setup(a,{emit:e}){const t=a,n=We(),r=On(),l=Be(),o=[10,25,50,100,250,500,1e3].map(h=>({title:h.toString(10),value:h})),i=G(!1),s=G(),c=G();function u(h){const g=t.entityPropertyDescriptorIndex.get(h);return g==null&&l.error(new tt(t.gridProps.params.dataPointer.connection,"Failed to find property descriptor for key: "+h)),g}function p(h,g){if(!g)return;const w=u(h);!g||g instanceof Array&&g.length===0||(w&&w.type===F.Entity&&w.key.name===bt.ParentPrimaryKey?n.createTabRequest(new la(t.gridProps.params.dataPointer.connection,t.gridProps.params.dataPointer.catalogName,t.gridProps.params.dataPointer.entityType,{dataLocale:t.dataLocale,queryLanguage:t.queryLanguage,pageNumber:t.pageNumber,pageSize:t.pageSize,filterBy:r.buildParentEntityFilterBy(t.queryLanguage,g.primaryKey)},!0)):w&&(w.type===F.Attributes&&w.schema.type===Z.Predecessor||w.type===F.AssociatedData&&w.schema.type===Z.Predecessor)?n.createTabRequest(new la(t.gridProps.params.dataPointer.connection,t.gridProps.params.dataPointer.catalogName,t.gridProps.params.dataPointer.entityType,{dataLocale:t.dataLocale,queryLanguage:t.queryLanguage,pageNumber:t.pageNumber,pageSize:t.pageSize,filterBy:r.buildPredecessorEntityFilterBy(t.queryLanguage,g)},!0)):w&&w.type===F.References?n.createTabRequest(new la(t.gridProps.params.dataPointer.connection,t.gridProps.params.dataPointer.catalogName,w.schema.referencedEntityType,{dataLocale:t.dataLocale,queryLanguage:t.queryLanguage,pageNumber:t.pageNumber,pageSize:t.pageSize,filterBy:r.buildReferencedEntityFilterBy(t.queryLanguage,g instanceof Array?g.map(b=>b.primaryKey):[g.primaryKey])},!0)):(s.value=w,c.value=g,i.value=!0))}function m(){i.value=!1,s.value=void 0,c.value=void 0}return(h,g)=>(S(),P(V(ki),{vertical:"",class:"data-grid__body"},{default:y(()=>[d(V(or),{size:"70","min-size":"30"},{default:y(()=>[d(V(Du),{headers:h.displayedGridHeaders,loading:h.loading,items:h.resultEntities,"items-length":h.totalResultCount,density:"compact","fixed-header":"","fixed-footer":"","multi-sort":"","items-per-page":h.pageSize,"items-per-page-Options":V(o),"onUpdate:options":g[0]||(g[0]=w=>e("gridUpdated",w))},{headers:y(({columns:w,isSorted:b,getSortIcon:f,toggleSort:_})=>[M("tr",null,[(S(!0),X(te,null,ke(w,T=>(S(),P(ud,{key:T.key,column:T,"is-sorted":b,"get-sort-icon":f,"toggle-sort":_},null,8,["column","is-sorted","get-sort-icon","toggle-sort"]))),128))])]),item:y(({item:w})=>[M("tr",null,[(S(!0),X(te,null,ke(w.columns,(b,f)=>(S(),P(ld,{key:f,"property-descriptor":h.entityPropertyDescriptorIndex.get(f),"data-locale":h.dataLocale,"property-value":b,onClick:_=>p(f,b)},null,8,["property-descriptor","data-locale","property-value","onClick"]))),128))])]),_:1},8,["headers","loading","items","items-length","items-per-page","items-per-page-Options"])]),_:1}),i.value?(S(),P(V(or),{key:0,size:"30","min-size":"30"},{default:y(()=>[d(Zc,{"model-value":i.value,"property-descriptor":s.value,"property-value":c.value,"onUpdate:modelValue":m},null,8,["model-value","property-descriptor","property-value"])]),_:1})):ee("",!0)]),_:1}))}});const dd=se(cd,[["__scopeId","data-v-a59a37a9"]]),pd={key:0,class:"data-grid"},fd=q({__name:"LabEditorDataGrid",props:{params:{},data:{}},emits:["ready"],setup(a,{emit:e}){var K,J,ge,ae,ce,Ce,de;const t=a,n=On(),r=Be(),l=G([t.params.dataPointer.catalogName,t.params.dataPointer.entityType]);let o=[],i=[];const s=new Map;let c=new Map,u=[];const p=G((K=t.data)!=null&&K.queryLanguage?t.data.queryLanguage:St.EvitaQL);he(p,(A,R)=>{A[0]!==R[0]&&(w.value="",b.value="",W())});const m=G(!1),h=G((J=t.data)!=null&&J.pageNumber?t.data.pageNumber:1),g=G((ge=t.data)!=null&&ge.pageSize?t.data.pageSize:25),w=G((ae=t.data)!=null&&ae.filterBy?t.data.filterBy:""),b=G((ce=t.data)!=null&&ce.orderBy?t.data.orderBy:""),f=G((Ce=t.data)!=null&&Ce.dataLocale?t.data.dataLocale:void 0);he(f,()=>W());const _=G((de=t.data)!=null&&de.displayedProperties?t.data.displayedProperties:[]);he(_,(A,R)=>{z(),A.length>R.length&&W()});const T=G([]),k=G([]),O=G(0),C=G(!1);e("ready"),Gr(()=>{n.getDataLocales(t.params.dataPointer).then(A=>(u=A,n.getEntityPropertyDescriptors(t.params.dataPointer))).then(A=>{i=A;for(const R of i){s.set(R.key.toString(),R),R.children.forEach(N=>{s.set(N.key.toString(),N)}),o.push(R.key.toString());for(const N of R.children)o.push(N.key.toString())}return L(i)}).then(A=>{c=A,U(),C.value=!0,e("ready"),t.params.executeOnOpen&&W()}).catch(A=>{r.error(A)})});async function L(A){var N;const R=new Map;for(const Y of A){R.set(Y.key.toString(),{key:Y.key.toString(),title:Y.flattenedTitle,sortable:Y.isSortable(),descriptor:Y});for(const H of Y.children)R.set(H.key.toString(),{key:H.key.toString(),title:H.flattenedTitle,sortable:((N=H.schema)==null?void 0:N.sortable)||!1,descriptor:H})}return R}async function z(){T.value=_.value.map(A=>c.get(A.toString())),T.value.sort((A,R)=>o.indexOf(A.key.toString())-o.indexOf(R.key.toString()))}function U(){_.value.length>0||(_.value=i.filter(A=>{var R;return A.key.type===F.Entity||((R=A.schema)==null?void 0:R.representative)}).map(A=>A.key))}async function I({page:A,itemsPerPage:R,sortBy:N}){h.value=A,g.value=R;try{b.value=await n.buildOrderByFromGridColumns(t.params.dataPointer,p.value,N)}catch(Y){r.error(Y)}await W()}async function W(){m.value=!0;try{const A=await n.executeQuery(t.params.dataPointer,p.value,w.value,b.value,f.value,_.value,h.value,g.value);k.value=A.entities.map(R=>{const N={};return R.forEach(([Y,H])=>N[Y.toString()]=H),N}),O.value=A.totalEntitiesCount}catch(A){r.error(A)}m.value=!1}return(A,R)=>C.value?(S(),X("div",pd,[d(lu,{path:l.value,locale:f.value,loading:m.value,onExecuteQuery:W},{query:y(()=>[d(ru,{"grid-props":t,"selected-query-language":p.value,"onUpdate:selectedQueryLanguage":R[0]||(R[0]=N=>p.value=N),"filter-by":w.value,"onUpdate:filterBy":R[1]||(R[1]=N=>w.value=N),"order-by":b.value,"onUpdate:orderBy":R[2]||(R[2]=N=>b.value=N),"data-locales":V(u),"selected-data-locale":f.value,"onUpdate:selectedDataLocale":R[3]||(R[3]=N=>f.value=N),"entity-property-descriptor-index":V(s),"selected-entity-property-keys":_.value,"onUpdate:selectedEntityPropertyKeys":R[4]||(R[4]=N=>_.value=N),onExecuteQuery:W},null,8,["grid-props","selected-query-language","filter-by","order-by","data-locales","selected-data-locale","entity-property-descriptor-index","selected-entity-property-keys"])]),_:1},8,["path","locale","loading"]),d(dd,{"grid-props":t,"entity-property-descriptor-index":V(s),"displayed-grid-headers":T.value,"data-locale":f.value,"query-language":p.value,loading:m.value,"result-entities":k.value,"total-result-count":O.value,"page-number":h.value,"page-size":g.value,onGridUpdated:I},null,8,["grid-props","entity-property-descriptor-index","displayed-grid-headers","data-locale","query-language","loading","result-entities","total-result-count","page-number","page-size"])])):ee("",!0)}});const md=se(fd,[["__scopeId","data-v-730e41e8"]]);class la extends Pi{constructor(e,t,n,r=void 0,l=!1){super(`${t} - ${n} [${e.name}]`,"mdi-table",Ei(md),{dataPointer:new Ci(e,t,n),executeOnOpen:l},r)}}const hd=q({__name:"LabExplorerCollectionItem",props:{entitySchema:{}},setup(a){const e=a,t=G([{value:"view-entities",title:"View entities",props:{prependIcon:"mdi-table"}},{value:"view-schema",title:"View schema",props:{prependIcon:"mdi-file-code"}}]),n=We(),r=je("connection"),l=je("catalogSchema");function o(){n.createTabRequest(new la(r,l.value.name,e.entitySchema.name))}function i(s){switch(s){case"view-entities":o();break;case"view-schema":n.createTabRequest(new ut(r,new Xr(l.value.name,e.entitySchema.name)));break}}return(s,c)=>(S(),P(ia,{"prepend-icon":"mdi-list-box-outline",actions:t.value,onClick:o,"onClick:action":i,class:"text-gray-light text-sm-body-2"},{default:y(()=>[D(j(s.entitySchema.name)+" ",1),d(fe,{activator:"parent"},{default:y(()=>[D(j(s.entitySchema.name),1)]),_:1})]),_:1},8,["actions"]))}}),gd={},vd=M("span",{class:"pl-8 text-disabled"}," No items found ",-1);function yd(a,e){return S(),P(et,null,{default:y(()=>[vd]),_:1})}const Xl=se(gd,[["render",yd]]),bd={key:0},_d=q({__name:"LabExplorerCatalogItem",props:{catalog:{}},setup(a){const e=a,t=G([{value:"open-evitaql-console",title:"Open EvitaQL console",props:{prependIcon:"mdi-console"}},{value:"open-graphql-data-api-console",title:"Open GraphQL Data API console",props:{prependIcon:"mdi-graphql"}},{value:"open-graphql-schema-api-console",title:"Open GraphQL Schema API console",props:{prependIcon:"mdi-graphql"}},{value:"view-schema",title:"View schema",props:{prependIcon:"mdi-file-code"}}]),n=Fe(),r=We(),l=Be(),o=je("connection"),i=G();Ye("catalogSchema",i);const s=G(!1);async function c(){if(!(i.value!==void 0||e.catalog.corrupted)){s.value=!0;try{i.value=await n.getCatalogSchema(o,e.catalog.name)}catch(p){l.error(p)}s.value=!1}}function u(p){switch(p){case"open-evitaql-console":r.createTabRequest(new xi(o,e.catalog.name));break;case"open-graphql-data-api-console":r.createTabRequest(new an(o,e.catalog.name,nn.DATA));break;case"open-graphql-schema-api-console":r.createTabRequest(new an(o,e.catalog.name,nn.SCHEMA));break;case"view-schema":r.createTabRequest(new ut(o,new Ai(e.catalog.name)));break}}return(p,m)=>(S(),P(wa,{value:`${V(o).name}|${p.catalog.name}`},{activator:y(({isOpen:h,props:g})=>[p.catalog.corrupted?(S(),P(ia,pe({key:1},g,{"prepend-icon":"mdi-menu",class:"text-red"}),{default:y(()=>[D(j(p.catalog.name)+" ",1),d(fe,{activator:"parent"},{default:y(()=>[D(" This catalog couldn't be loaded because it's corrupted. ")]),_:1})]),_:2},1040)):(S(),P(ia,pe({key:0},g,{openable:"","is-open":h,"prepend-icon":"mdi-menu",loading:s.value,actions:t.value,onClick:c,"onClick:action":u,class:"font-weight-bold"}),{default:y(()=>[D(j(p.catalog.name)+" ",1),d(fe,{activator:"parent"},{default:y(()=>[D(j(p.catalog.name),1)]),_:1})]),_:2},1040,["is-open","loading","actions"]))]),default:y(()=>[!p.catalog.corrupted&&i.value!==void 0?(S(),X("div",bd,[Object.values(i.value.entitySchemas).length>0?(S(!0),X(te,{key:0},ke(Object.values(i.value.entitySchemas),h=>(S(),P(hd,{key:h.name,"entity-schema":h},null,8,["entity-schema"]))),128)):(S(),P(Xl,{key:1}))])):ee("",!0)]),_:1},8,["value"]))}}),Sd=q({__name:"LabExplorerConnectionRemoveDialog",props:{modelValue:{type:Boolean},connection:{}},emits:["update:modelValue"],setup(a,{emit:e}){const t=a,n=Fe(),r=Be();function l(){e("update:modelValue",!1)}function o(){try{n.removeConnection(t.connection.id)}catch(i){r.error(i);return}r.success("Connection removed."),e("update:modelValue",!1)}return(i,s)=>(S(),P(kn,{"model-value":i.modelValue,"max-width":"30rem","onUpdate:modelValue":s[0]||(s[0]=c=>i.$emit("update:modelValue",c))},{activator:y(({props:c})=>[Ue(i.$slots,"activator",yn(bn(c)))]),default:y(()=>[d(ka,{class:"py-8 px-4"},{default:y(()=>[d($t,null,{default:y(()=>[D("Remove connection")]),_:1}),d(Bt,{class:"mb-4"},{default:y(()=>[D(" Are you sure you want to remove the connection "),M("strong",null,j(i.connection.name),1),D("? ")]),_:1}),d(Tn,null,{default:y(()=>[d(In),d(ie,{onClick:l,variant:"tonal"},{default:y(()=>[D(" Cancel ")]),_:1}),d(ie,{variant:"outlined","prepend-icon":"mdi-delete",onClick:o},{default:y(()=>[D(" Remove ")]),_:1})]),_:1})]),_:1})]),_:3},8,["model-value"]))}}),Od={key:0},wd=q({__name:"LabExplorerConnectionItem",props:{connection:{}},setup(a){const e=a,t=We(),n=Fe(),r=Be();Ye("connection",Di(e.connection));const l=G([{value:"open-graphql-system-api-console",title:"Open GraphQL System API console",props:{prependIcon:"mdi-graphql"}}]);!n.isReadOnly()&&!e.connection.preconfigured&&l.value.push({value:"remove",title:"Remove connection",props:{prependIcon:"mdi-delete"}});const o=G(!1),i=G(),s=G(!1);async function c(){if(i.value===void 0){s.value=!0;try{i.value=await n.getCatalogs(e.connection)}catch(p){r.error(p)}s.value=!1}}function u(p,m){switch(p){case"open-graphql-system-api-console":t.createTabRequest(new an(e.connection,"system",nn.SYSTEM));break;case"edit":throw new tt(void 0,"Not implemented yet.");case"remove":o.value=!0;break}}return(p,m)=>(S(),P(wa,{value:p.connection.name},{activator:y(({isOpen:h,props:g})=>[d(ia,pe(g,{openable:"","is-open":h,"prepend-icon":"mdi-power-plug-outline",loading:s.value,actions:l.value,onClick:c,"onClick:action":u,class:"font-weight-bold"}),{default:y(()=>[D(j(p.connection.name)+" ",1),d(fe,{activator:"parent"},{default:y(()=>[D(j(p.connection.name),1)]),_:1})]),_:2},1040,["is-open","loading","actions"])]),default:y(()=>[i.value!==void 0?(S(),X("div",Od,[i.value.length>0?(S(!0),X(te,{key:0},ke(i.value,h=>(S(),P(_d,{key:h.name,catalog:h},null,8,["catalog"]))),128)):(S(),P(Xl,{key:1}))])):ee("",!0),d(Sd,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=h=>o.value=h),connection:p.connection},null,8,["modelValue","connection"])]),_:1},8,["value"]))}}),Td=le({...at(),...Li()},"VForm"),kd=Se()({name:"VForm",props:Td(),emits:{"update:modelValue":a=>!0,submit:a=>!0},setup(a,e){let{slots:t,emit:n}=e;const r=Ii(a),l=G();function o(s){s.preventDefault(),r.reset()}function i(s){const c=s,u=r.validate();c.then=u.then.bind(u),c.catch=u.catch.bind(u),c.finally=u.finally.bind(u),n("submit",c),c.defaultPrevented||u.then(p=>{var h;let{valid:m}=p;m&&((h=l.value)==null||h.submit())}),c.preventDefault()}return Ee(()=>{var s;return d("form",{ref:l,class:["v-form",a.class],style:a.style,novalidate:!0,onReset:o,onSubmit:i},[(s=t.default)==null?void 0:s.call(t,r)])}),jr(r,l)}}),Pd=q({__name:"LabExplorerConnectionEditor",props:{modelValue:{type:Boolean},connection:{default:void 0}},emits:["update:modelValue"],setup(a,{emit:e}){const t=a,n=Fe(),r=Be(),l=[f=>f?!0:"Name of connection is required.",f=>n.isConnectionExists(f)?"Connection with this name already exists.":!0],o=[f=>f?!0:"evitaLab API URL is required.",f=>{try{return new URL(f),!0}catch{return"evitaLab API URL is not a valid URL."}},async f=>await m()?(u.value.labApiUrlTested=1,!0):(u.value.labApiUrlTested=2,"evitaLab API URL is not reachable.")],i=[f=>f?!0:"GraphQL API URL is required.",f=>{try{return new URL(f),!0}catch{return"GraphQL API URL is not a valid URL."}},async f=>await h()?(u.value.gqlUrlTested=1,!0):(u.value.gqlUrlTested=2,"GraphQL API URL is not reachable.")],s=G(null),c=x(()=>t.connection?1:0),u=G({name:"",labApiUrl:"",labApiUrlTested:0,gqlUrl:"",gqlUrlTested:0});function p(f){switch(f){case 0:return null;case 1:return"mdi-check-circle-outline";case 2:return"mdi-close-circle-outline"}}async function m(){try{return(await ir.get(u.value.labApiUrl+"/system/liveness").json()).liveness||!1}catch{return!1}}async function h(){var f;try{const _=await ir.post(u.value.gqlUrl+"/system",{headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
                    {
                        liveness
                    }
                `})}).json();return((f=_==null?void 0:_.data)==null?void 0:f.liveness)||!1}catch{return!1}}async function g(){let f=!0;return await m()?u.value.labApiUrlTested=1:(f=!1,u.value.labApiUrlTested=2),await h()?u.value.gqlUrlTested=1:(f=!1,u.value.gqlUrlTested=2),f?r.success("Successfully connected."):r.error("Connection test failed."),f}function w(){s.value.reset(),u.value={name:"",labApiUrl:"",labApiUrlTested:0,gqlUrl:"",gqlUrlTested:0},e("update:modelValue",!1)}async function b(){const{valid:f}=await s.value.validate();if(f){try{n.addConnection(new Vi(void 0,u.value.name,!1,u.value.labApiUrl,"https://localhost:5555/rest",u.value.gqlUrl))}catch(_){r.error(_);return}s.value.reset(),e("update:modelValue",!1)}}return(f,_)=>(S(),P(kn,{"model-value":f.modelValue,"onUpdate:modelValue":_[3]||(_[3]=T=>f.$emit("update:modelValue",T)),persistent:"","max-width":"36rem"},{activator:y(({props:T})=>[Ue(f.$slots,"activator",yn(bn(T)))]),default:y(()=>[d(ka,{class:"py-8 px-4"},{default:y(()=>[c.value===0?(S(),P($t,{key:0},{default:y(()=>[D("Add connection")]),_:1})):ee("",!0),c.value===1?(S(),P($t,{key:1},{default:y(()=>[D("Edit connection")]),_:1})):ee("",!0),d(Bt,null,{default:y(()=>[d(kd,{ref_key:"form",ref:s,"validate-on":"submit"},{default:y(()=>[d(ea,{modelValue:u.value.name,"onUpdate:modelValue":_[0]||(_[0]=T=>u.value.name=T),label:"Connection name",placeholder:"evitaDB",variant:"solo-filled",rules:l,required:""},null,8,["modelValue"]),d(ea,{modelValue:u.value.labApiUrl,"onUpdate:modelValue":_[1]||(_[1]=T=>u.value.labApiUrl=T),label:"evitaLab API URL",placeholder:"https://{evitadb-server}:5555/lab/api",variant:"solo-filled",required:"",rules:o,"append-inner-icon":p(u.value.labApiUrlTested)},null,8,["modelValue","append-inner-icon"]),d(ea,{modelValue:u.value.gqlUrl,"onUpdate:modelValue":_[2]||(_[2]=T=>u.value.gqlUrl=T),label:"GraphQL API URL",placeholder:"https://{evitadb-server}:5555/gql",variant:"solo-filled",required:"",rules:i,"append-inner-icon":p(u.value.gqlUrlTested)},null,8,["modelValue","append-inner-icon"])]),_:1},512)]),_:1}),d(Tn,{class:"px-6"},{default:y(()=>[d(ie,{variant:"plain","prepend-icon":"mdi-connection",onClick:g},{default:y(()=>[D(" Test connection ")]),_:1}),d(In),d(ie,{variant:"tonal",onClick:w},{default:y(()=>[D(" Cancel ")]),_:1}),d(ie,{variant:"outlined","prepend-icon":"mdi-content-save",onClick:b,class:"ml-4"},{default:y(()=>[D(" Save ")]),_:1})]),_:1})]),_:1})]),_:3},8,["model-value"]))}}),Ed={key:0,class:"pa-2"},Cd=q({__name:"LabExplorer",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(a,{emit:e}){const t=Fe(),n=G(!1),r=x(()=>t.getConnections());return(l,o)=>(S(),P(nl,{permanent:"","model-value":l.modelValue,"onUpdate:modelValue":o[2]||(o[2]=i=>l.$emit("update:modelValue",i)),class:"bg-primary"},{append:y(()=>[V(t).isReadOnly()?ee("",!0):(S(),X("div",Ed,[d(Pd,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=i=>n.value=i)},{activator:y(({props:i})=>[d(ie,pe({"prepend-icon":"mdi-plus",block:"",variant:"outlined"},i,{onClick:o[0]||(o[0]=s=>n.value=!0)}),{default:y(()=>[D(" Add connection ")]),_:2},1040)]),_:1},8,["modelValue"])]))]),default:y(()=>[d(st,{density:"compact",nav:""},{default:y(()=>[d($i,{class:"text-gray-light text-sm-body-2 font-weight-medium"},{default:y(()=>[D("Connections Explorer")]),_:1}),(S(!0),X(te,null,ke(r.value,i=>(S(),P(wd,{key:i.name,connection:i},null,8,["connection"]))),128))]),_:1})]),_:1},8,["model-value"]))}}),Ad=a=>(ya("data-v-60d2bd0a"),a=a(),ba(),a),xd={class:"loading-screen"},Dd={class:"loading-screen-info"},Ld=Ad(()=>M("span",null,"Loading, please wait ...",-1)),Id=q({__name:"LabEditorLoadingScreen",setup(a){return(e,t)=>(S(),X("div",xd,[M("div",Dd,[d(Fr,{size:48}),Ld])]))}});const Vd=se(Id,[["__scopeId","data-v-60d2bd0a"]]),$d=q({__name:"LabEditorTabWindow",props:{component:{},componentProps:{}},setup(a){const e=G(!1);return(t,n)=>(S(),X(te,null,[(S(),P(Bi,null,[qr((S(),P(Ni(t.component),pe(t.componentProps,{onReady:n[0]||(n[0]=r=>e.value=!0)}),null,16)),[[Ri,e.value]])],1024)),e.value?ee("",!0):(S(),P(Vd,{key:0}))],64))}});function Rd(a,e){return a.length<=e?a:a.substring(0,e-3)+"..."}const Nd="/lab/logo/evitalab-logo-representative.svg",Ca=a=>(ya("data-v-c724fc83"),a=a(),ba(),a),Bd={class:"editor-welcome-screen"},Md={class:"editor-welcome-screen-hero"},Gd={class:"editor-welcome-screen-hero__header"},Ud={class:"editor-welcome-screen-hero__title"},Fd=Ca(()=>M("h1",{class:"font-weight-bold mb-2",style:{"font-size":"4.375rem"}},"evitaLab",-1)),Wd={class:"text-white",style:{"font-size":"1rem"}},zd=Ca(()=>M("a",{class:"text-primary-lightest text-body-2",href:"https://github.com/lukashornych/evitalab/releases",target:"_blank"},"(changelog)",-1)),Hd=Ca(()=>M("p",{class:"text-gray-light",style:{"font-size":"1rem"}},"evitaDB web client",-1)),qd={class:"editor-welcome-screen-blog"},Qd=["href"],Xd={class:"editor-welcome-screen-blog-img__wrap"},jd=["src","alt"],Yd={class:"editor-welcome-screen-blog-item__title"},Kd={class:"editor-welcome-screen-blog-item__perex"},Zd=Ca(()=>M("span",{class:"editor-welcome-screen-blog-item__btn"},"Read",-1)),Jd=Mi('<span class="editor-welcome-screen-hr" data-v-c724fc83> </span><ul class="editor-welcome-screen-hero__links" data-v-c724fc83><li data-v-c724fc83>Check out the <a href="https://evitadb.io/documentation" target="_blank" data-v-c724fc83> evitaDB documentation</a></li><li data-v-c724fc83>Give us a ⭐ on <a href="https://github.com/lukashornych/evitalab/" target="_blank" data-v-c724fc83> GitHub</a></li><li data-v-c724fc83>Reach out to us on <a href="https://discord.gg/VsNBWxgmSw" target="_blank" data-v-c724fc83> Discord</a></li><li data-v-c724fc83><a href="https://github.com/lukashornych/evitalab/issues" target="_blank" data-v-c724fc83> Submit an issue</a></li></ul>',2),ep=q({__name:"LabEditorWelcomeScreen",setup(a){const e=Fe(),t="v1.6.1",n=G([]);return e.getBlogPosts().then(r=>{n.value=r}),(r,l)=>(S(),X("div",Bd,[M("div",Md,[M("header",Gd,[d(gn,{width:"240",height:"240","max-width":"240","max-height":"240",alt:"evitaLab Logo",src:Nd,class:"evitalab-logo"}),M("div",Ud,[Fd,M("p",Wd,[D(j(V(t))+" ",1),zd]),Hd])]),M("div",qd,[(S(!0),X(te,null,ke(n.value,o=>(S(),X("a",{key:o.url,href:o.url,target:"_blank"},[M("span",Xd,[M("img",{class:"Blog_BlogMotive__72hVr",height:"160",width:"480",src:o.thumbnailUrl,alt:`Image - ${o.title}`},null,8,jd)]),M("span",Yd,j(o.title),1),M("span",Kd,[d(_n,{source:o.perex},null,8,["source"])]),Zd],8,Qd))),128))]),Jd])]))}});const tp=se(ep,[["__scopeId","data-v-c724fc83"]]);const ap=le({scrollable:Boolean,...at(),...Nt({tag:"main"})},"VMain"),np=Se()({name:"VMain",props:ap(),setup(a,e){let{slots:t}=e;const{mainStyles:n}=qi(),{ssrBootStyles:r}=fn();return Ee(()=>d(a.tag,{class:["v-main",{"v-main--scrollable":a.scrollable},a.class],style:[n.value,r.value,a.style]},{default:()=>{var l,o;return[a.scrollable?d("div",{class:"v-main__scroller"},[(l=t.default)==null?void 0:l.call(t)]):(o=t.default)==null?void 0:o.call(t)]}})),{}}}),rp={key:1,style:{position:"relative"}},lp=q({__name:"LabEditor",setup(a){const e=Gi(),t=Be(),n=We(),r=Ui(),l=x(()=>n.getTabRequests());he(l,()=>{const c=n.getNewTabRequest();c&&(o.value=c.id,n.markTabRequestAsVisited(c.id))},{deep:!0});const o=G();function i(c){const u=l.value.length,p=l.value.findIndex(h=>h.id===o.value),m=l.value.findIndex(h=>h.id===c);n.destroyTabRequest(c),l.value.length===0?o.value=null:m===p&&m===u-1?o.value=l.value[m-1].id:m===p&&m<u-1&&(o.value=l.value[m].id)}async function s(){const c=e.query.demoSnippetRequest;if(c!=null)try{const u=JSON.parse(atob(c));return await r.resolve(u)}catch(u){t.error(u)}}return s().then(c=>{c&&n.createTabRequest(c)}),(c,u)=>(S(),X(te,null,[l.value.length>0?(S(),P(Yi,{key:0,density:"compact",elevation:"0"},{default:y(()=>[d(Wi,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=p=>o.value=p)},{default:y(()=>[(S(!0),X(te,null,ke(l.value,p=>(S(),P(Fi,{key:p.id,value:p.id,"prepend-icon":p.icon,onMousedown:Je(m=>i(p.id),["middle"]),class:"lab-tab"},{default:y(()=>[M("span",null,[D(j(V(Rd)(p.title,30))+" ",1),p.title.length>30?(S(),P(fe,{key:0,activator:"parent"},{default:y(()=>[D(j(p.title),1)]),_:2},1024)):ee("",!0)]),d(ie,{icon:"",variant:"plain",density:"compact",class:"ml-3",onClick:Je(m=>i(p.id),["stop"])},{default:y(()=>[d(ne,null,{default:y(()=>[D("mdi-close")]),_:1}),d(fe,{activator:"parent"},{default:y(()=>[D(" Close tab ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["value","prepend-icon","onMousedown"]))),128))]),_:1},8,["modelValue"])]),_:1})):ee("",!0),d(np,{scrollable:!1,class:"lab-editor"},{default:y(()=>[l.value.length>0?(S(),P(Hi,{key:0,modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=p=>o.value=p)},{default:y(()=>[(S(!0),X(te,null,ke(l.value,p=>(S(),P(zi,{key:p.id,value:p.id,transition:!1,"reverse-transition":!1,class:"window-item"},{default:y(()=>[d($d,{component:p.component,"component-props":p.componentProps()},null,8,["component","component-props"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):(S(),X("div",rp,[d(tp)]))]),_:1})],64))}});const op=se(lp,[["__scopeId","data-v-d17b89d3"]]),cp=q({__name:"Lab",setup(a){const e=G(Ka.Explorer);return(t,n)=>(S(),X(te,null,[d(_s,{panel:e.value,"onUpdate:panel":n[0]||(n[0]=r=>e.value=r)},null,8,["panel"]),d(Cd,{"model-value":e.value===V(Ka).Explorer},null,8,["model-value"]),d(op)],64))}});export{cp as default};
